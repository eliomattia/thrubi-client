(this["webpackJsonpthrubi-client"]=this["webpackJsonpthrubi-client"]||[]).push([[0],{229:function(e,t,n){e.exports=n(572)},253:function(e,t){},255:function(e,t){},285:function(e,t){},286:function(e,t){},350:function(e,t){},567:function(e,t,n){},568:function(e,t,n){},569:function(e,t,n){},570:function(e,t,n){},572:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"switchOptionLoginCreate",(function(){return tn})),n.d(r,"logout",(function(){return nn})),n.d(r,"fetchChannels",(function(){return on})),n.d(r,"fetchUserChannels",(function(){return cn})),n.d(r,"deleteChannel",(function(){return un})),n.d(r,"setPayChannel",(function(){return ln})),n.d(r,"createBlockchainEthereum",(function(){return dn})),n.d(r,"loginBlockchainEthereum",(function(){return fn})),n.d(r,"addBlockchainEthereum",(function(){return mn})),n.d(r,"updateBlockchainEthereum",(function(){return En})),n.d(r,"createKeyboardForm",(function(){return yn})),n.d(r,"loginKeyboardForm",(function(){return hn})),n.d(r,"addKeyboardForm",(function(){return bn})),n.d(r,"updateKeyboardForm",(function(){return On})),n.d(r,"abandonKeyboard",(function(){return vn})),n.d(r,"chooseKeyboard",(function(){return _n})),n.d(r,"createKeyboard",(function(){return Tn})),n.d(r,"loginKeyboard",(function(){return In})),n.d(r,"addKeyboard",(function(){return Nn})),n.d(r,"updateKeyboard",(function(){return gn})),n.d(r,"createFacebook",(function(){return xn})),n.d(r,"loginFacebook",(function(){return Pn})),n.d(r,"addFacebook",(function(){return kn})),n.d(r,"updateFacebook",(function(){return Un})),n.d(r,"createLinkedIn",(function(){return Fn})),n.d(r,"loginLinkedIn",(function(){return Bn})),n.d(r,"addLinkedIn",(function(){return Dn})),n.d(r,"updateLinkedIn",(function(){return Mn})),n.d(r,"createGoogle",(function(){return Hn})),n.d(r,"loginGoogle",(function(){return Vn})),n.d(r,"addGoogle",(function(){return Kn})),n.d(r,"updateGoogle",(function(){return Wn})),n.d(r,"createPayPal",(function(){return qn})),n.d(r,"loginPayPal",(function(){return Jn})),n.d(r,"addPayPal",(function(){return Xn})),n.d(r,"updatePayPal",(function(){return $n})),n.d(r,"sendRedirect",(function(){return zn}));var a=n(0),o=n.n(a),c=n(96),u=n.n(c),i=n(39),l=n(226),s=n(3),p=n(27),d=n(225),f=n.n(d),m=function(e){var t=e.dispatch,n=e.getState;return function(e){return function(r){return"function"===typeof r.action?r.action((function(e){return t({action:e})}),n):e(r.action)}}},E={flareType:{ERROR:"ERROR",WARNING:"WARNING",INFO:"INFO"},flareFallback:function(e,t){return e&&e.thrubiFlareId?e:(t.details=e,t)},infoFlare:{DETECTED_ETH_NETWORK_CHANGE:{thrubiFlareId:"I001",message:"Detected Ethereum network change"},DETECTED_ETH_ADDRESS_CHANGE:{thrubiFlareId:"I002",message:"Detected Ethereum address change"},DEACTIVATED_ON:{thrubiFlareId:"I003",message:"User account is deactivated"},DEACTIVATED_OFF:{thrubiFlareId:"I004",message:"User account is now active"},EMAIL_VERIFIED_ON:{thrubiFlareId:"I005",message:"Email address has been verified"},EMAIL_VERIFIED_OFF:{thrubiFlareId:"I006",message:"Unverified email address detected. Please verify."},IDENTITY_CERTIFIED_ON:{thrubiFlareId:"I007",message:"Identity document certified"},IDENTITY_CERTIFIED_OFF:{thrubiFlareId:"I008",message:"Non-certified identity document detected. Please certify."},INCOME_APPROVED_ON:{thrubiFlareId:"I009",message:"Declared income has been officially approved"},INCOME_APPROVED_OFF:{thrubiFlareId:"I010",message:"Newly declared income is not approved, please check."}},errorFlare:{USER_ACTIVATION:{thrubiFlareId:"0021",message:"User activation module error"},UNEXPECTED_FLARE:{thrubiFlareId:"0009",message:"Flares must have an ID to be dispatched"},THRUBI_SERVER_ERROR:{thrubiFlareId:"0001",message:"Thrubi server returned an error"},THRUBI_CONNECTION_FAILED:{thrubiFlareId:"0002",message:"Thrubi server not available, please check your connection"},FAILED_LOGOUT:{thrubiFlareId:"0003",message:"Unable to logout"},FAILED_LOGIN:{thrubiFlareId:"0008",message:"Login failed"},EXRATE_FETCH_ERROR:{thrubiFlareId:"0010",message:"Failed fetching exchange rate from Coinbase server"},FB_NOT_FOUND:{thrubiFlareId:"0004",message:"Unable to connect to Facebook"},ERR_FETCH_GLOBAL_STATS:{thrubiFlareId:"0011",message:"Error while receiving global stats"},ERR_RECEIVE_GLOBAL_STATS:{thrubiFlareId:"0012",message:"Error while processing global stats"},CANNOT_ENABLE_ETHEREUM:{thrubiFlareId:"0013",message:"Could not enable Ethereum"},ERR_USER_DETAILS:{thrubiFlareId:"0014",message:"Error processing user details"},ERR_ACCOUNT_CLOSE:{thrubiFlareId:"0015",message:"Could not close user account"},ERR_GENERIC_USERMENU:{thrubiFlareId:"0016",message:"Internal: error with an user menu operation"},ERR_PAY_CHANNEL_UPDATE:{thrubiFlareId:"0017",message:"Error updating user pay channel"},ERR_USER_CHANNEL_FETCH:{thrubiFlareId:"0018",message:"Error fetching user channels"},ERR_CHANNEL_FETCH:{thrubiFlareId:"0019",message:"Error fetching channels"},ERR_USER_FLAGS:{thrubiFlareId:"0020",message:"Could not update user flags"},CHANNEL_CLOSED:{thrubiFlareId:"0005",message:"Switching to Add Channel page, channel is not open"},MESSAGE_IGNORED:{thrubiFlareId:"0006",message:"Internal: message from login popup ignored"},ERROR_STOP_TOKEN_REFRESH:{thrubiFlareId:"0007",message:"Internal: error stopping token refresh"}}},y=n(1),h=n.n(y),b=n(2),O={APP_SHUTDOWN:null,LOGOUT:null,STOP_AUTO_LOGIN:null,UPDATE_ETH_NETWORK:null,UPDATE_ETH_ADDRESS:null,REFRESH_TOKENS:null,RECEIVE_CHANNELS:null,RECEIVE_USER_CHANNELS:null,RECEIVE_LOGIN_CHANNEL:null,RECEIVE_PAY_CHANNEL:null,RECEIVE_FACEBOOK_LOGIN_STATUS:null,RECEIVE_LINKEDIN_WINDOW_AND_LISTENER:null,CLEAR_LINKEDIN_WINDOW_AND_LISTENER:null,RECEIVE_LINKEDIN_LOGIN:null,RECEIVE_GOOGLE_WINDOW_AND_LISTENER:null,CLEAR_GOOGLE_WINDOW_AND_LISTENER:null,RECEIVE_GOOGLE_LOGIN:null,LOGIN:null,RECEIVE_USER_FLAGS:null,SET_USER_ACTIVATED:null,SET_USER_DEACTIVATED:null,RECEIVE_USER_DETAILS:null,DELETE_USER_DETAILS:null,ABANDON_KEYBOARD:null,CHOOSE_KEYBOARD:null,SWITCH_OPTION_LOGIN_CREATE:null,SWITCH_OPTION_USER_MENU:null,SET_OPTION_ADVANCED_MODE:null,SET_OPTION_VIEW_HISTORY:null,CHANGE_POPULATION:null,RECEIVE_POPULATIONS:null,CLEAR_POPULATION:null,SELECT_POPULATION:null,POPULATION_EXISTS:null,RECEIVE_THRUBI_PRICE_SILVER:null,RECEIVE_THRUBI_PRICE_SILVER_NEXT:null,RECEIVE_STATS:null,RECEIVE_CONFIG:null,CLEAR_MEMBER:null,RECEIVE_MEMBER:null,RECEIVE_CCYS:null,SELECT_CCY:null,DESELECT_CCY:null,RECEIVE_COUNTRIES:null,SELECT_COUNTRY:null,DESELECT_COUNTRY:null,RECEIVE_EXRATE:null,RECEIVE_GLOBAL_STATS:null,RECEIVE_THRUBI_CONTRACT:null,SET_BUSY:null,SET_NOT_BUSY:null,INCREASE_FLARE_NEXT:null,EMIT_FLARE:null,DELETE_FLARE:null,REFRESH_FLARE_TIMEOUT:null,RECEIVE_ETH_NETWORK_WORKER:null,RECEIVE_ETH_ADDRESS_WORKER:null,RECEIVE_REFRESH_TOKENS_WORKER:null,RECEIVE_GLOBAL_STATS_WORKER:null,RECEIVE_USER_WORKER:null,RECEIVE_MEMBER_WORKER:null,RECEIVE_MARKET_WORKER:null,RECEIVE_POPULATION_WORKER:null,STOP_ETH_NETWORK_WORKER:null,STOP_ETH_ADDRESS_WORKER:null,STOP_REFRESH_TOKENS_WORKER:null,STOP_GLOBAL_STATS_WORKER:null,STOP_USER_WORKER:null,STOP_MEMBER_WORKER:null,STOP_MARKET_WORKER:null,STOP_POPULATION_WORKER:null};Object.keys(O).map((function(e){return O[e]=e}));var v={BUSY_COMPONENT_APP:{busyType:"component",busyId:"app"},BUSY_COMPONENT_TITLEBAR:{busyType:"component",busyId:"titlebar"},BUSY_COMPONENT_VIEWPORT:{busyType:"component",busyId:"viewport"},BUSY_COMPONENT_DASHBOARD:{busyType:"component",busyId:"dashboard"},BUSY_COMPONENT_CLIENT:{busyType:"component",busyId:"client"},BUSY_COMPONENT_AUTH:{busyType:"component",busyId:"auth"},BUSY_COMPONENT_USER:{busyType:"component",busyId:"user"},BUSY_COMPONENT_CLAIM:{busyType:"component",busyId:"claim"},BUSY_COMPONENT_TRANSFORM:{busyType:"component",busyId:"transform"},BUSY_COMPONENT_USERMENU:{busyType:"component",busyId:"userMenu"},BUSY_COMPONENT_ADMINMENU:{busyType:"component",busyId:"adminMenu"},BUSY_ACTION_FETCHPOPULATIONS:{busyType:"action",busyId:"fetchPopulations"},BUSY_ACTION_ACTIVATION:{busyType:"action",busyId:"activation"},BUSY_ACTION_CLAIM:{busyType:"action",busyId:"claim"},BUSY_ACTION_TRANSFORM:{busyType:"action",busyId:"transform"},BUSY_ACTION_USERDETAILS:{busyType:"action",busyId:"userDetails"},BUSY_ACTION_ACTIVATEUSER:{busyType:"action",busyId:"activateUser"},BUSY_ACTION_DECLAREINCOME:{busyType:"action",busyId:"declareIncome"},BUSY_ACTION_POPULATIONS:{busyType:"action",busyId:"populations"}},_=O,T=function(e,t){return function(){var n=Object(b.a)(h.a.mark((function n(r,a){var o,c,u,i;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Promise.resolve().then((function(){return o=a().session.flare.next})).then((function(){return c=E.flareFallback(t,E.errorFlare.UNEXPECTED_FLARE)})).then((function(){return u=c.thrubiFlareId===E.errorFlare.THRUBI_SERVER_ERROR.thrubiFlareId?c.serverError:c.message})).then((function(){return JSON.stringify(c.details)})).then((function(e){return i="string"===typeof c.details?c.details:e})).then((function(){return r({type:_.INCREASE_FLARE_NEXT,payload:{}})})).then((function(){return setTimeout((function(){return r(I(o))}),7e3)})).then((function(t){return r({type:_.EMIT_FLARE,payload:{index:o,type:e,message:u,details:i,deleteTimeout:t}})})));case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},I=function(e){return function(){var t=Object(b.a)(h.a.mark((function t(n,r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.resolve().then((function(){return clearTimeout(r().session.flare.flares[e].deleteTimeout)})).then((function(){return n({type:_.DELETE_FLARE,payload:{index:e}})})));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},N=function(e){var t=e.dispatch;e.getState;return function(e){return function(n){return"function"===typeof n?t({action:n}).catch((function(e){t({action:T(E.flareType.ERROR,e)})})):n.action?e(n):void 0}}},g={thrubiContract:{}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _.RECEIVE_THRUBI_CONTRACT:return Object.assign({},e,{thrubiContract:t.payload.thrubiContract});default:return e}},S=n(228),A=n(28),C={deactivated:!0,next:0,flares:{}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _.INCREASE_FLARE_NEXT:return Object.assign({},e,{next:e.next+1});case _.EMIT_FLARE:return Object.assign({},e,{deactivated:!1,flares:Object.assign({},e.flares,Object(A.a)({},t.payload.index,{type:t.payload.type,message:t.payload.message,details:t.payload.details,deleteTimeout:t.payload.deleteTimeout}))});case _.DELETE_FLARE:return Object.assign({},e,{deactivated:1===Object.keys(e.flares).length&&Object.keys(e.flares)[0]===t.payload.index,flares:Object.assign.apply(Object,[{}].concat(Object(S.a)(Object.keys(e.flares).map((function(n){return n.toString()!==t.payload.index.toString()?Object(A.a)({},n,e.flares[n]):null})).filter((function(e){return null!==e})))))});case _.REFRESH_FLARE_TIMEOUT:return Object.assign({},e,{deactivated:e.deactivated,flares:Object.assign({},e.flares,Object(A.a)({},t.payload.index,{type:e.flares[t.payload.index].type,message:e.flares[t.payload.index].message,details:e.flares[t.payload.index].details,deleteTimeout:t.payload.deleteTimeout}))});default:return e}},x={ethNetwork:null,ethAddress:null,refreshTokens:null,globalStats:null,user:null,member:null,market:null,population:null},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _.RECEIVE_ETH_NETWORK_WORKER:return Object.assign({},e,{ethNetwork:t.payload.ethNetworkWorker});case _.RECEIVE_ETH_ADDRESS_WORKER:return Object.assign({},e,{ethAddress:t.payload.ethAddressWorker});case _.RECEIVE_REFRESH_TOKENS_WORKER:return Object.assign({},e,{refreshTokens:t.payload.refreshTokensWorker});case _.RECEIVE_GLOBAL_STATS_WORKER:return Object.assign({},e,{globalStats:t.payload.globalStatsWorker});case _.RECEIVE_USER_WORKER:return Object.assign({},e,{user:t.payload.userWorker});case _.RECEIVE_MEMBER_WORKER:return Object.assign({},e,{member:t.payload.memberWorker});case _.RECEIVE_MARKET_WORKER:return Object.assign({},e,{market:t.payload.marketWorker});case _.RECEIVE_POPULATION_WORKER:return Object.assign({},e,{population:t.payload.populationWorker});case _.STOP_ETH_NETWORK_WORKER:return Object.assign({},e,{ethNetwork:null});case _.STOP_ETH_ADDRESS_WORKER:return Object.assign({},e,{ethAddress:null});case _.STOP_REFRESH_TOKENS_WORKER:return Object.assign({},e,{refreshTokens:null});case _.STOP_GLOBAL_STATS_WORKER:return Object.assign({},e,{globalStats:null});case _.STOP_USER_WORKER:return Object.assign({},e,{user:null});case _.STOP_MEMBER_WORKER:return Object.assign({},e,{member:null});case _.STOP_MARKET_WORKER:return Object.assign({},e,{market:null});case _.STOP_POPULATION_WORKER:return Object.assign({},e,{population:null});default:return e}},k={component:{app:!1,titlebar:!1,viewport:!1,dashboard:!1,client:!1,auth:!1,user:!1,claim:!1,transform:!1,userMenu:!1,adminMenu:!1},action:{fetchPopulations:!1,activation:!1,claim:!1,transform:!1,userDetails:!1,activateUser:!1,declareIncome:!1,populations:!1}},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _.SET_BUSY:return Object.assign({},e,Object(A.a)({},t.payload.busyType,Object.assign({},e[t.payload.busyType],Object(A.a)({},t.payload.busyId,!0))));case _.SET_NOT_BUSY:return Object.assign({},e,Object(A.a)({},t.payload.busyType,Object.assign({},e[t.payload.busyType],Object(A.a)({},t.payload.busyId,!1))));default:return e}},L=Object(p.c)({blockchain:R,workers:P,busy:U,flare:w}),j={exrate:0},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _.RECEIVE_EXRATE:return Object.assign({},e,{exrate:t.payload.exrate});case _.STOP_MARKET_WORKER:return{exrate:0};default:return e}},B={nUser:0,nCountry:0,nCcy:0},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _.RECEIVE_GLOBAL_STATS:return{nUser:t.payload.globalStats.nUser,nCountry:t.payload.globalStats.nCountry,nCcy:t.payload.globalStats.nCcy};default:return e}},M={countries:[],id:null},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _.RECEIVE_COUNTRIES:return Object.assign({},e,{countries:t.payload.countries});case _.SELECT_COUNTRY:return Object.assign({},e,{id:t.payload.countryId});case _.DESELECT_COUNTRY:return Object.assign({},e,{id:null});default:return e}},Y={ccys:[],id:null},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _.RECEIVE_CCYS:return Object.assign({},e,{ccys:t.payload.ccys});case _.SELECT_CCY:return Object.assign({},e,{id:t.payload.ccyId});case _.DESELECT_CCY:return Object.assign({},e,{id:null});default:return e}},V=Object(p.c)({market:F,stats:D,country:G,ccy:H}),K={deactivated:null,emailVerified:null,identityCertified:null,incomeApproved:null};Object.keys(K).map((function(e){return K[e]=e}));var W=K,q=function(e,t){if(e)switch(t){case W.deactivated:return E.infoFlare.DEACTIVATED_ON;case W.emailVerified:return E.infoFlare.EMAIL_VERIFIED_ON;case W.identityCertified:return E.infoFlare.IDENTITY_CERTIFIED_ON;case W.incomeApproved:return E.infoFlare.INCOME_APPROVED_ON;default:return null}else switch(t){case W.deactivated:return E.infoFlare.DEACTIVATED_OFF;case W.emailVerified:return E.infoFlare.EMAIL_VERIFIED_OFF;case W.identityCertified:return E.infoFlare.IDENTITY_CERTIFIED_OFF;case W.incomeApproved:return E.infoFlare.INCOME_APPROVED_OFF;default:return null}},J=1,X="submittedDocument",$={optionLoginCreate:{LOGIN:"LOGIN",CREATE:"CREATE"},optionUserMenu:{ADD:"ADD",USER:"USER",PAY:"PAY",MANAGE:"MANAGE"},optionKeyboardMode:{ADD:"ADD",UPDATE:"UPDATE"}},z={id:null,role:null,deactivated:null,emailVerified:null,identityCertified:null,incomeApproved:null,name:null,surname:null,email:null,document:null,optionKeyboardMode:null,optionLoginCreate:$.optionLoginCreate.LOGIN,optionUserMenu:$.optionUserMenu.ADD,optionAdvancedMode:!1,optionViewHistory:!1},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _.APP_SHUTDOWN:case _.LOGOUT:return Object.assign({},z);case _.LOGIN:return Object.assign({},e,{id:parseInt(t.payload.userId),role:parseInt(t.payload.userRole),optionKeyboardMode:null});case _.RECEIVE_USER_FLAGS:return Object.assign({},e,{deactivated:parseInt(t.payload.deactivated)===e.deactivated?e.deactivated:parseInt(t.payload.deactivated),emailVerified:parseInt(t.payload.emailVerified)===e.emailVerified?e.emailVerified:parseInt(t.payload.emailVerified),identityCertified:parseInt(t.payload.identityCertified)===e.identityCertified?e.identityCertified:parseInt(t.payload.identityCertified),incomeApproved:parseInt(t.payload.incomeApproved)===e.incomeApproved?e.incomeApproved:parseInt(t.payload.incomeApproved)});case _.SET_USER_ACTIVATED:return Object.assign({},e,{deactivated:0});case _.SET_USER_DEACTIVATED:return Object.assign({},e,{deactivated:1});case _.RECEIVE_USER_DETAILS:return Object.assign({},e,{name:t.payload.name?t.payload.name:e.name,surname:t.payload.surname?t.payload.surname:e.surname,email:t.payload.email?t.payload.email:e.email,document:t.payload.document?t.payload.document:e.document});case _.DELETE_USER_DETAILS:return Object.assign({},e,{name:null,surname:null,email:null,document:null});case _.ABANDON_KEYBOARD:return Object.assign({},e,{optionKeyboardMode:null});case _.CHOOSE_KEYBOARD:return Object.assign({},e,{optionKeyboardMode:t.payload.optionKeyboardMode?t.payload.optionKeyboardMode:e.optionLoginCreate});case _.SWITCH_OPTION_LOGIN_CREATE:return Object.assign({},e,{optionLoginCreate:e.optionLoginCreate===$.optionLoginCreate.LOGIN?$.optionLoginCreate.CREATE:$.optionLoginCreate.LOGIN,optionKeyboardMode:e.optionKeyboardMode?e.optionLoginCreate===$.optionLoginCreate.LOGIN?$.optionLoginCreate.CREATE:$.optionLoginCreate.LOGIN:null});case _.SWITCH_OPTION_USER_MENU:return Object.assign({},e,{optionUserMenu:t.payload.optionUserMenu});case _.SET_OPTION_ADVANCED_MODE:return Object.assign({},e,{optionAdvancedMode:t.payload.optionAdvancedMode,optionViewHistory:!!t.payload.optionAdvancedMode&&t.payload.optionViewHistory});case _.SET_OPTION_VIEW_HISTORY:return Object.assign({},e,{optionViewHistory:t.payload.optionViewHistory});default:return e}},Z={ethNetwork:null,ethAddress:null,autoLogin:!1,loggedIn:!1,loginChannel:null,payChannel:null,channels:{BLOCKCHAIN_ETHEREUM:0,KEYBOARD:0,FACEBOOK:0,LINKEDIN:0,GOOGLE:0,PAYPAL:0},facebookStatus:null,facebookUserId:null,facebookUserAccessToken:null,linkedInWindow:null,linkedInListener:null,linkedInCode:null,linkedInState:null,googleWindow:null,googleListener:null,googleCode:null,accessJwt:null,refreshJwt:null},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _.APP_SHUTDOWN:return Object.assign({},Z);case _.LOGOUT:return Object.assign({},Z,{ethNetwork:e.ethNetwork,ethAddress:e.ethAddress,autoLogin:!(!t.payload||!t.payload.autoLogin)&&t.payload.autoLogin});case _.STOP_AUTO_LOGIN:return Object.assign({},Z,{autoLogin:!1});case _.UPDATE_ETH_NETWORK:return Object.assign({},e,{ethNetwork:t.payload.ethNetwork});case _.UPDATE_ETH_ADDRESS:return Object.assign({},e,{ethAddress:t.payload.ethAddress});case _.REFRESH_TOKENS:return Object.assign({},e,{accessJwt:t.payload.accessJwt,refreshJwt:t.payload.refreshJwt});case _.RECEIVE_CHANNELS:case _.RECEIVE_USER_CHANNELS:return Object.assign({},e,{channels:{BLOCKCHAIN_ETHEREUM:t.payload.BLOCKCHAIN_ETHEREUM?t.payload.BLOCKCHAIN_ETHEREUM:e.channels.BLOCKCHAIN_ETHEREUM,KEYBOARD:t.payload.KEYBOARD?t.payload.KEYBOARD:e.channels.KEYBOARD,FACEBOOK:t.payload.FACEBOOK?t.payload.FACEBOOK:e.channels.FACEBOOK,LINKEDIN:t.payload.LINKEDIN?t.payload.LINKEDIN:e.channels.LINKEDIN,GOOGLE:t.payload.GOOGLE?t.payload.GOOGLE:e.channels.GOOGLE,PAYPAL:t.payload.PAYPAL?t.payload.PAYPAL:e.channels.PAYPAL}});case _.RECEIVE_LOGIN_CHANNEL:return Object.assign({},e,{loginChannel:t.payload.loginChannel});case _.RECEIVE_PAY_CHANNEL:return Object.assign({},e,{payChannel:t.payload.payChannel});case _.RECEIVE_FACEBOOK_LOGIN_STATUS:return Object.assign({},e,{facebookStatus:t.payload.facebookStatus,facebookUserId:t.payload.facebookUserId,facebookUserAccessToken:t.payload.facebookUserAccessToken});case _.RECEIVE_LINKEDIN_WINDOW_AND_LISTENER:return Object.assign({},e,{linkedInWindow:t.payload.linkedInWindow,linkedInListener:t.payload.linkedInListener});case _.CLEAR_LINKEDIN_WINDOW_AND_LISTENER:return Object.assign({},e,{linkedInWindow:null,linkedInListener:null});case _.RECEIVE_LINKEDIN_LOGIN:return Object.assign({},e,{linkedInCode:t.payload.code,linkedInState:t.payload.state});case _.RECEIVE_GOOGLE_WINDOW_AND_LISTENER:return Object.assign({},e,{googleWindow:t.payload.googleWindow,googleListener:t.payload.googleListener});case _.CLEAR_GOOGLE_WINDOW_AND_LISTENER:return Object.assign({},e,{googleWindow:null,googleListener:null});case _.RECEIVE_GOOGLE_LOGIN:return Object.assign({},e,{googleCode:t.payload.code});case _.LOGIN:return Object.assign({},e,{loggedIn:!0,autoLogin:!0,accessJwt:t.payload.accessJwt,refreshJwt:t.payload.refreshJwt,payChannel:t.payload.payChannel});default:return e}},te={populations:[],exists:null,id:null,countryId:null,countryName:null,ccyId:null,ccyName:null,ccySymbol:null,thrubiPriceSilver:0,thrubiPriceSilverNext:0,thrubiPriceGold:1.5,brake:0,mincome:0,equality:0,warperMincome:0,warperEquality:0,thrubiFees:.005},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _.APP_SHUTDOWN:case _.LOGOUT:return te;case _.CLEAR_POPULATION:return Object.assign({},te,{populations:e.populations});case _.RECEIVE_POPULATIONS:return Object.assign({},e,{populations:t.payload.populations});case _.SELECT_POPULATION:return Object.assign({},e,{id:parseInt(t.payload.population.populationId),countryId:t.payload.population.countryId,countryName:t.payload.population.countryName,ccyId:t.payload.population.ccyId,ccyName:t.payload.population.ccyName,ccySymbol:t.payload.population.ccySymbol});case _.RECEIVE_THRUBI_PRICE_SILVER:return Object.assign({},e,{thrubiPriceSilver:t.payload.thrubiPriceSilver});case _.RECEIVE_THRUBI_PRICE_SILVER_NEXT:return Object.assign({},e,{thrubiPriceSilverNext:t.payload.thrubiPriceSilverNext});case _.RECEIVE_STATS:return Object.assign({},e,{mincome:parseFloat(t.payload.stats.mincome),equality:parseFloat(t.payload.stats.equality)});case _.RECEIVE_CONFIG:return Object.assign({},e,{brake:parseFloat(t.payload.config.brake),warperMincome:parseFloat(t.payload.config.warperMincome),warperEquality:parseFloat(t.payload.config.warperEquality)});case _.POPULATION_EXISTS:return Object.assign({},e,{exists:t.payload.exists});default:return e}},re={isMember:!1,mCurrent:0,thrubiMode:-1,thrubiBlue:0,thrubiBlueNext:0,thrubiBlueEth:0,thrubiBlueAward:0,thrubiBlueAwardTotal:0,thrubiBlueClaimTotal:0,thrubiSilver:0,thrubiSilverNext:0,thrubiSilverEth:0,thrubiSilverTransformTotal:0,thrubiGold:0},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _.APP_SHUTDOWN:case _.LOGOUT:case _.CLEAR_MEMBER:return re;case _.RECEIVE_MEMBER:return Object.assign({},e,{isMember:!0,mCurrent:parseFloat(t.payload.member.mCurrent),thrubiMode:parseInt(t.payload.member.thrubiMode),thrubiBlue:parseFloat(t.payload.member.thrubiBlue),thrubiBlueNext:parseFloat(t.payload.member.thrubiBlueNext),thrubiBlueEth:parseFloat(t.payload.member.thrubiBlueEth),thrubiBlueAward:parseFloat(t.payload.member.thrubiBlueAward),thrubiBlueAwardTotal:parseFloat(t.payload.member.thrubiBlueAwardTotal),thrubiBlueClaimTotal:parseFloat(t.payload.member.thrubiBlueClaimTotal),thrubiSilver:parseFloat(t.payload.member.thrubiSilver),thrubiSilverNext:parseFloat(t.payload.member.thrubiSilverNext),thrubiSilverEth:parseFloat(t.payload.member.thrubiSilverEth),thrubiSilverRedeem:parseFloat(t.payload.member.thrubiSilverRedeem),thrubiSilverTransformTotal:parseFloat(t.payload.member.thrubiSilverTransformTotal),thrubiGold:parseFloat(t.payload.member.thrubiGold)});default:return e}},oe=Object(p.c)({user:Q,userAccess:ee,population:ne,member:ae}),ce=Object(p.c)({session:L,global:V,client:oe}),ue=[N,m];ue.push(f.a);var ie=function(){return Object(p.d)(ce,p.a.apply(void 0,ue))},le=n(5),se=n(6),pe=n(8),de=n(7),fe=n(9),me=Object(s.b)((function(e){return{nUser:e.global.stats.nUser,nCountry:e.global.stats.nCountry,nCcy:e.global.stats.nCcy}}),{})((function(e){var t=e.nUser,n=e.nCcy,r=e.nCountry;return o.a.createElement("span",{className:"text-primary d-none d-lg-inline-block text-center small mr-2 alignBottom"},t," ",1===t?"user":"users"," using Thrubi in ",r," ",1===r?"country":"countries"," and ",n," ",1===n?"currency":"currencies")})),Ee=Object(s.b)((function(e){return{ethNetwork:e.client.userAccess.ethNetwork,ethAddress:e.client.userAccess.ethAddress}}))((function(e){var t=e.ethNetwork,n=e.ethAddress;return o.a.createElement("div",{className:"container-fluid navbar fixed-top flex-md-nowrap p-0 titleBar bg-light"},o.a.createElement("div",{className:"col-lg-7 d-flex justify-content-center justify-content-md-center justify-content-lg-start fullWidth text-left"},o.a.createElement("img",{className:"mr-2 logoThrubi",src:"/thrubi-client/logo.png",alt:"Thrubi logo",height:"20px",width:"20px"}),o.a.createElement("span",{className:"mr-2 alignBottom navbar-brand thrubiGradient"},o.a.createElement("b",null,"Thrubi App")),o.a.createElement("span",{className:"d-none d-xl-block mr-2 alignBottom text-dark navbar-nav"},"Welcome to Thrubi!"),o.a.createElement(me,null)),o.a.createElement("div",{className:"col-lg-5 d-none d-lg-block float-right mr-0 my-2 text-right ethBadges"},o.a.createElement("div",{className:"navbar-nav small"},t&&n?o.a.createElement("div",null,o.a.createElement("span",{className:"badge badge-warning"},"network/",t),o.a.createElement("span",{className:"badge badge-info"},n)):"Accessing blockchain data")))})),ye=function(){function e(){Object(le.a)(this,e)}return Object(se.a)(e,null,[{key:"channelIsOpen",value:function(e){return e>0}},{key:"channelIsForLogin",value:function(e){return Math.abs(e)%2}},{key:"channelIsForPay",value:function(e){return(Math.abs(e)>>1)%2}},{key:"channelColor",value:function(e){switch(e){case"BLOCKCHAIN_ETHEREUM":return"blockchain-ethereum";case"KEYBOARD":return"keyboard";case"FACEBOOK":return"facebook";case"LINKEDIN":return"linkedin";case"GOOGLE":return"google";case"PAYPAL":return"paypal";default:return""}}},{key:"channelAuthFunctionName",value:function(e){switch(e){case"BLOCKCHAIN_ETHEREUM":return"BlockchainEthereum";case"KEYBOARD":return"Keyboard";case"FACEBOOK":return"Facebook";case"LINKEDIN":return"LinkedIn";case"GOOGLE":return"Google";case"PAYPAL":return"PayPal";default:return""}}},{key:"keyboardChannelMessage",value:function(e){switch(e){case"LOGIN":return"Sign in with username/password";case"CREATE":return"Create a new Thrubi account with username/password";case"ADD":return"Add username/password credentials to my account";case"UPDATE":return"Update my username/password credentials";default:return""}}},{key:"channelUserFriendlyName",value:function(e,t){switch(t){case"USE":switch(e){case"BLOCKCHAIN_ETHEREUM":return"Use my Ethereum wallet";case"PAYPAL":return"Use my PayPal account";default:return""}case"USING":switch(e){case"BLOCKCHAIN_ETHEREUM":return"Using my Ethereum wallet";case"PAYPAL":return"Using my PayPal account";default:return""}case"LINK":switch(e){case"BLOCKCHAIN_ETHEREUM":return"Connect an Ethereum wallet to use it";case"PAYPAL":return"Connect a PayPal account to use it";default:return""}case"LOGIN":switch(e){case"BLOCKCHAIN_ETHEREUM":return"Sign in with Ethereum wallet";case"KEYBOARD":return"Sign in with username/password";case"FACEBOOK":return"Sign in with Facebook";case"LINKEDIN":return"Sign in with LinkedIn";case"GOOGLE":return"Sign in with Google";default:return""}case"CREATE":switch(e){case"BLOCKCHAIN_ETHEREUM":return"Sign up with Ethereum wallet";case"KEYBOARD":return"Sign up with username/password";case"FACEBOOK":return"Sign up with Facebook";case"LINKEDIN":return"Sign up with LinkedIn";case"GOOGLE":return"Sign up with Google";default:return""}case"ADD":switch(e){case"BLOCKCHAIN_ETHEREUM":return"Connect an Ethereum wallet";case"KEYBOARD":return"Enable credentials (username/password)";case"FACEBOOK":return"Connect a Facebook account";case"LINKEDIN":return"Connect a LinkedIn account";case"GOOGLE":return"Connect a Google account";case"PAYPAL":return"Connect a PayPal account";default:return""}case"DELETE":switch(e){case"BLOCKCHAIN_ETHEREUM":return"Disable access via my Ethereum wallet";case"KEYBOARD":return"Disable credentials (username/password)";case"FACEBOOK":return"Disconnect my Facebook account";case"LINKEDIN":return"Disconnect my LinkedIn account";case"GOOGLE":return"Disconnect my Google account";case"PAYPAL":return"Disconnect my PayPal account";default:return""}case"UPDATE":switch(e){case"BLOCKCHAIN_ETHEREUM":return"Connect another Ethereum wallet";case"KEYBOARD":return"Update username/password";case"FACEBOOK":return"Connect another Facebook account";case"LINKEDIN":return"Connect another LinkedIn account";case"GOOGLE":return"Connect another Google account";case"PAYPAL":return"Connect another PayPal account";default:return""}default:return""}}}]),e}(),he=function(e){var t=e.action,n=e.payload,r=e.text,a=e.buttonType,c=e.disabled,u=void 0!==c&&c,i=e.channel,l=void 0!==i&&i;return o.a.createElement("button",{disabled:u,onClick:function(e){e.preventDefault(),t(n)},className:"btn btn-sm btn-block rounded-0 my-2 py-2 "+a+(l?ye.channelColor(l):"")},o.a.createElement("div",{className:"container-fluid row p-0 m-0"+(l?"":" fullWidth")},o.a.createElement("div",{className:l?"":"fullWidth"},l?o.a.createElement("img",{className:"p-0 my-0 mx-2",alt:l,height:"32",width:"32",src:"/thrubi-client/png/"+ye.channelColor(l)+".png"}):"",o.a.createElement("div",{className:(l?"ml-4":"fullWidth")+" displayInlineBlock text-"+(l?"left":"center")},r))))},be=n(77),Oe=n.n(be),ve="https://t001002.herokuapp.com",_e="get",Te="post",Ie="X-Access-Token",Ne="Bearer ",ge=function(e,t,n){return function(r,a){return new Promise((function(r,o){var c=function(e,t){var n,a;if(e)o(E.errorFlare.THRUBI_CONNECTION_FAILED);else if(n=t.body,200===t.statusCode)a=n.result,r(a);else{var c=E.errorFlare.THRUBI_SERVER_ERROR;c.serverError=n.error,o(c)}};try{var u={url:ve+t,json:null===n?{}:n};a().client.userAccess.loggedIn&&(u.headers=Object(A.a)({},Ie,Ne+a().client.userAccess.accessJwt)),e===_e?Oe.a.get(u,c):e===Te&&Oe.a.post(u,c)}catch(i){o(E.errorFlare.THRUBI_CONNECTION_FAILED)}}))}},Re=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=setInterval(function(){var e=function(){var e;t((e=n().client.population.ccyId,function(){var t=Object(b.a)(h.a.mark((function t(n,r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=2;break}return t.abrupt("return",new Promise((function(t,r){Oe.a.get({url:"https://api.coinbase.com/v2/prices/ETH-"+e+"/spot",json:{}},(function(e,a){if(e)r(E.errorFlare.EXRATE_FETCH_ERROR);else{var o=parseFloat(a.body.data.amount);n({type:_.RECEIVE_EXRATE,payload:{exrate:o}}),t(o)}}))})));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()))};return e(),e}(),1e3),t({type:_.RECEIVE_MARKET_WORKER,payload:{marketWorker:r}});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Se=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:clearInterval(n().session.workers.market),t({type:_.STOP_MARKET_WORKER,payload:{}});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Ae="/auth/challenge/blockchainEthereum",Ce="/auth/listChannels",we="/auth/refresh",xe="/auth/logout",Pe="/auth/create/blockchainEthereum",ke="/auth/login/blockchainEthereum",Ue="/auth/create/keyboard",Le="/auth/login/keyboard",je="/auth/create/facebook",Fe="/auth/login/facebook",Be="/auth/create/linkedIn",De="/auth/login/linkedIn",Me="/auth/create/google",Ge="/auth/login/google",Ye="/country/list",He="/ccy/list",Ve="/member/create",Ke="/member/delete",We="/member/request/claim",qe="/member",Je="/member/request/declareIncome",Xe="/stats/nUser",$e="/stats/nCountry",ze="/stats/nCcy",Qe="/user/getFlags",Ze="/user/activate",et="/user/deactivate",tt="/user/details/fetch",nt="/user/details/delete",rt="/user/details/store",at="/user/certify",ot="/user/close",ct="/userAccess/listUserChannels",ut="/userAccess/setPayChannel",it="/userAccess/delete",lt="/userAccess/add/keyboard",st="/userAccess/update/keyboard",pt="/userAccess/add/blockchainEthereum",dt="/userAccess/update/blockchainEthereum",ft="/userAccess/add/facebook",mt="/userAccess/update/facebook",Et="/userAccess/add/linkedIn",yt="/userAccess/update/linkedIn",ht="/userAccess/add/google",bt="/userAccess/update/google",Ot="/population/forUser",vt="/population/thrubiPrice/silver",_t="/population/thrubiPrice/silver/next",Tt="/population/create",It="/population/delete",Nt="/population/stats/read",gt="/population/config/read",Rt="/population/config/change",St="/population/exists",At=function(e){return function(){var t=Object(b.a)(h.a.mark((function t(n,r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:_.SELECT_POPULATION,payload:{population:e}});case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},Ct=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(Ft()),t(xt()),t(Se()),t({type:_.CLEAR_POPULATION,payload:{}});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},wt=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=setInterval(function(){var e=function(){t(Pt(n().client.population.id)),t(kt(n().client.population.id)),n().client.user.auth&&(t(Ut(n().client.population.id)),t(Lt(n().client.population.id)))};return e(),e}(),1e3),t({type:_.RECEIVE_POPULATION_WORKER,payload:{populationWorker:r}});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},xt=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:clearInterval(n().session.workers.population),t({type:_.STOP_POPULATION_WORKER,payload:{}});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Pt=function(e){return function(){var t=Object(b.a)(h.a.mark((function t(n,r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.resolve().then((function(){return n(ge(_e,vt+"/"+e,null))})).then((function(e){return n({type:_.RECEIVE_THRUBI_PRICE_SILVER,payload:{thrubiPriceSilver:parseFloat(e.thrubiPriceSilver)}})})).catch((function(e){return n(T(E.flareType.ERROR,E.flareType.ERR_GENERIC_USERMENU))})));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},kt=function(e){return function(){var t=Object(b.a)(h.a.mark((function t(n,r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.resolve().then((function(){return n(ge(_e,_t+"/"+e,null))})).then((function(e){return n({type:_.RECEIVE_THRUBI_PRICE_SILVER_NEXT,payload:{thrubiPriceSilverNext:parseFloat(e.thrubiPriceSilverNext)}})})).catch((function(e){return n(T(E.flareType.ERROR,E.flareType.ERR_GENERIC_USERMENU))})));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},Ut=function(e){return function(){var t=Object(b.a)(h.a.mark((function t(n,r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.resolve().then((function(){return n(ge(_e,Nt+"/"+e,null))})).then((function(e){return n({type:_.RECEIVE_STATS,payload:{stats:e}})})).catch((function(e){return n(T(E.flareType.ERROR,E.flareType.ERR_GENERIC_USERMENU))})));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},Lt=function(e){return function(){var t=Object(b.a)(h.a.mark((function t(n,r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.resolve().then((function(){return n(ge(_e,gt+"/"+e,null))})).then((function(e){return n({type:_.RECEIVE_CONFIG,payload:{config:e}})})).catch((function(e){return n(T(E.flareType.ERROR,E.flareType.ERR_GENERIC_USERMENU))})));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},jt=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=setInterval(function(){var e=function(){t(function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve().then((function(){return t(ge(_e,qe+"/"+n().client.population.id,null))})).then((function(e){return t({type:_.RECEIVE_MEMBER,payload:{member:e}})})).catch((function(e){return t(T(E.flareType.ERROR,E.flareType.ERR_GENERIC_USERMENU))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())};return e(),e}(),1e3),t({type:_.RECEIVE_MEMBER_WORKER,payload:{memberWorker:r}});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Ft=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:clearInterval(n().session.workers.member),t({type:_.STOP_MEMBER_WORKER,payload:{}});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Bt=function(e){function t(){return Object(le.a)(this,t),Object(pe.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(fe.a)(t,e),Object(se.a)(t,[{key:"render",value:function(){var e=this.props.identityCertified,t=this.props.removeMembership;return o.a.createElement(he,{text:(e>0?"Abandon country membership":"Terminate certification procedure")+" and select another country and currency",buttonType:"btn-outline-secondary",action:t})}}]),t}(a.Component),Dt=Object(s.b)((function(e){return{identityCertified:e.client.user.identityCertified}}),{removeMembership:function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve().then((function(){return t(xt())})).then((function(){return t(Ft())})).then((function(){return t(Se())})).then((function(){return t(ge(Te,Ke+"/"+n().client.population.id,null))})).then((function(){return t({type:_.CLEAR_POPULATION,payload:{}})})).then((function(){return t({type:_.CLEAR_MEMBER,payload:{}})})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}})(Bt),Mt=function(e){function t(){return Object(le.a)(this,t),Object(pe.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(fe.a)(t,e),Object(se.a)(t,[{key:"render",value:function(){var e=this.props,t=e.optionAdvancedMode,n=e.optionViewHistory,r=this.props,a=r.advancedMode,c=r.viewHistory;return o.a.createElement("div",{className:"navbar-light col-lg-4"},o.a.createElement(he,{buttonType:"p-0 btn-outline-primary"+(t?" active":""),action:function(){return a(!t)},text:t?"Advanced":"Basic"}),o.a.createElement(he,{buttonType:"p-0 btn-outline-primary"+(n?" active":""),disabled:!t,action:function(){return c(!n)},text:"History"}),o.a.createElement(Dt,null))}}]),t}(a.Component),Gt=Object(s.b)((function(e){return{optionAdvancedMode:e.client.user.optionAdvancedMode,optionViewHistory:e.client.user.optionViewHistory,populationId:e.client.population.id}}),{advancedMode:function(e){return function(){var t=Object(b.a)(h.a.mark((function t(n,r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n({type:_.SET_OPTION_ADVANCED_MODE,payload:{optionAdvancedMode:e}}));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},viewHistory:function(e){return function(){var t=Object(b.a)(h.a.mark((function t(n,r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n({type:_.SET_OPTION_VIEW_HISTORY,payload:{optionViewHistory:e}}));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}})(Mt),Yt=Object(s.b)((function(e){return{ccySymbol:e.client.population.ccySymbol,exrate:e.global.market.exrate,thrubiPriceSilver:e.client.population.thrubiPriceSilver,thrubiPriceSilverNext:e.client.population.thrubiPriceSilverNext,thrubiPriceGold:e.client.population.thrubiPriceGold}}),{})((function(e){var t=e.ccySymbol,n=e.exrate,r=e.thrubiPriceSilver,a=e.thrubiPriceSilverNext,c=e.thrubiPriceGold;return o.a.createElement("div",{className:"col-sm-4 container-fluid p-0 m-0 small"},o.a.createElement("div",{className:"col-sm-12 container-fluid row p-0 m-0"},o.a.createElement("div",{className:"col-5 container-fluid p-0 m-0 text-right"},o.a.createElement("div",{className:"col-sm-12 p-0"},"1.00\u039e"),o.a.createElement("div",{className:"col-sm-12 p-0"},"1.00$\u20ae"),o.a.createElement("div",{className:"col-sm-12 p-0"},"1.00$\u20ae"),o.a.createElement("div",{className:"col-sm-12 p-0"},"1.00\u20b2\u20ae")),o.a.createElement("div",{className:"col-2 container-fluid p-0 m-0 text-center"},o.a.createElement("div",{className:"col-sm-12 p-0"},"="),o.a.createElement("div",{className:"col-sm-12 p-0"},"="),o.a.createElement("div",{className:"col-sm-12 p-0"},"="),o.a.createElement("div",{className:"col-sm-12 p-0"},"=")),o.a.createElement("div",{className:"col-5 container-fluid p-0 m-0 text-left"},o.a.createElement("div",{className:"col-sm-12 p-0"},n.toFixed(2),t),o.a.createElement("div",{className:"col-sm-12 p-0"},r.toFixed(2),t),o.a.createElement("div",{className:"col-sm-12 p-0"},a.toFixed(2),t," (next)"),o.a.createElement("div",{className:"col-sm-12 p-0"},c.toFixed(2),t))))})),Ht=function(e){var t=e.text,n=e.bold,r=e.value,a=e.ccySymbol;return o.a.createElement("div",{className:"small row ccyRowContainer"},o.a.createElement("span",{className:"text-left ccyRowElement col-6"},t),o.a.createElement("span",{className:"text-right ccyRowElement col-5"},isNaN(r)?"n/a":n?o.a.createElement("b",null,r.toFixed(2)):r.toFixed(2)),o.a.createElement("span",{className:"text-right ccyRowElement col-1"},n?o.a.createElement("b",null,a):a))},Vt=n(78),Kt=n.n(Vt),Wt="confirmation",qt=[{constant:!0,inputs:[],name:"userCount",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0x07973ccf"},{constant:!0,inputs:[],name:"lastProcessedClaim",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0x17f0f244"},{constant:!0,inputs:[],name:"lastProcessedTransform",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0x7b306690"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function",signature:"0x8da5cb5b"},{constant:!0,inputs:[],name:"lastClaim",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0xa8adb564"},{constant:!0,inputs:[],name:"lastTransform",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0xaa2ddbf1"},{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor",signature:"constructor"},{anonymous:!1,inputs:[{indexed:!1,name:"ethAddress",type:"address"}],name:"UserCreated",type:"event",signature:"0x0b0376a109cbb578b709f85f6a7befcdac3ac1ab251c99ede87f30c9572ac4d3"},{anonymous:!1,inputs:[{indexed:!1,name:"ethAddress",type:"address"},{indexed:!1,name:"name",type:"string"},{indexed:!1,name:"surname",type:"string"}],name:"UserUpdated",type:"event",signature:"0xe5d18d6612696bff7df1db8015eac613241613297fa2ba2783993e4fd0e76f3d"},{anonymous:!1,inputs:[{indexed:!1,name:"ethAddress",type:"address"},{indexed:!1,name:"deactivated",type:"bool"}],name:"UserActivated",type:"event",signature:"0x778b37e4212438e31bb36f033dd30e024005d668a4df069a75261d4e41f4013f"},{anonymous:!1,inputs:[{indexed:!1,name:"ethAddress",type:"address"},{indexed:!1,name:"deactivated",type:"bool"}],name:"UserDeactivated",type:"event",signature:"0x1b32d41cdfc3bfbfff6b3c55227176d2d8d97ea2494e509db5d8b60d246e680b"},{anonymous:!1,inputs:[{indexed:!1,name:"ethAddress",type:"address"},{indexed:!1,name:"populationId",type:"uint256"},{indexed:!1,name:"userId",type:"uint256"},{indexed:!1,name:"weiAmount",type:"uint256"}],name:"ClaimSubmitted",type:"event",signature:"0x199cf6ad2e6ce4f20f4f77bf95042862858fe7b5fb2240b17ec190107e6b41e8"},{anonymous:!1,inputs:[{indexed:!1,name:"ethAddress",type:"address"},{indexed:!1,name:"populationId",type:"uint256"},{indexed:!1,name:"userId",type:"uint256"},{indexed:!1,name:"weiAmount",type:"uint256"}],name:"TransformSubmitted",type:"event",signature:"0x6b8d5104af05a3749790a02190abe69665e450a2af5f4dd52ac361f9a8a22bd5"},{constant:!1,inputs:[{name:"_ethAddress",type:"address"},{name:"_populationId",type:"uint256"},{name:"_userId",type:"uint256"}],name:"transform",outputs:[],payable:!0,stateMutability:"payable",type:"function",signature:"0x3259af21"},{constant:!0,inputs:[],name:"getLastTransform",outputs:[{name:"_lastTransform",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0x8a3f8702"},{constant:!0,inputs:[],name:"getLastProcessedTransform",outputs:[{name:"_lastProcessedTransform",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0x766dcc9c"},{constant:!0,inputs:[{name:"_i",type:"uint256"}],name:"getTransform",outputs:[{name:"_ethAddress",type:"address"},{name:"_populationId",type:"uint256"},{name:"_userId",type:"uint256"},{name:"_weiAmount",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0x21347ab1"},{constant:!1,inputs:[],name:"signalProcessedTransforms",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0x764103fc"},{constant:!1,inputs:[{name:"_ethAddress",type:"address"},{name:"_populationId",type:"uint256"},{name:"_userId",type:"uint256"},{name:"_weiAmount",type:"uint256"}],name:"claimEth",outputs:[],payable:!0,stateMutability:"payable",type:"function",signature:"0xf92b929f"},{constant:!0,inputs:[],name:"getLastClaim",outputs:[{name:"_lastClaim",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0x68a825ad"},{constant:!0,inputs:[],name:"getLastProcessedClaim",outputs:[{name:"_lastProcessedClaim",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0x8fdfde42"},{constant:!0,inputs:[{name:"_i",type:"uint256"}],name:"getClaim",outputs:[{name:"_address",type:"address"},{name:"_populationId",type:"uint256"},{name:"_userId",type:"uint256"},{name:"_weiAmount",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0x5aef2447"},{constant:!0,inputs:[{name:"_ethAddress",type:"address"}],name:"findMe",outputs:[{name:"foundMe",type:"bool"}],payable:!1,stateMutability:"view",type:"function",signature:"0x3223a182"},{constant:!0,inputs:[{name:"_ethAddress",type:"address"}],name:"findMyUser",outputs:[{name:"found",type:"bool"},{name:"name",type:"string"},{name:"surname",type:"string"},{name:"deactivated",type:"bool"}],payable:!1,stateMutability:"view",type:"function",signature:"0xc77489f1"},{constant:!1,inputs:[{name:"_ethAddress",type:"address"},{name:"_name",type:"string"},{name:"_surname",type:"string"}],name:"updateUser",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0x10e8b22d"},{constant:!1,inputs:[{name:"_ethAddress",type:"address"}],name:"createUser",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0xcdd87618"},{constant:!1,inputs:[{name:"_ethAddress",type:"address"}],name:"activateUser",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0xb4acfe1c"},{constant:!1,inputs:[{name:"_ethAddress",type:"address"}],name:"deactivateUser",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0x1a47767b"}],Jt={connected:"connected",unknown:"unknown",not_authorized:"not_authorized"},Xt="/me?fields=first_name,last_name,email",$t="email",zt=function(e,t,n){return"https://www.linkedin.com/oauth/v2/authorization?response_type=code&redirect_uri="+e+"&state="+t+"&scope=r_liteprofile%20r_emailaddress&client_id="+n},Qt=function(e,t){return"https://accounts.google.com/o/oauth2/auth?response_type=code&redirect_uri="+e+"&scope=email%20profile&client_id="+t},Zt="https://eliomattia.github.io/thrubi-client",en="https://eliomattia.github.io/thrubi-client",tn=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t({type:_.SWITCH_OPTION_LOGIN_CREATE,payload:{}}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},nn=function(e){return function(){var t=Object(b.a)(h.a.mark((function t(n,r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r().client.userAccess.loggedIn){t.next=4;break}return t.next=3,Promise.resolve().then((function(){return n({type:_.SET_BUSY,payload:v.BUSY_COMPONENT_AUTH})})).then((function(){return n(ge(Te,xe,{refreshJwt:r().client.userAccess.refreshJwt}))})).then((function(){return n({type:_.LOGOUT,payload:e})})).then((function(){return n(rn())})).then((function(){return n(on())})).then((function(){return n(nr())})).then((function(){return n(Ct())})).then((function(){return n(An())})).catch((function(e){throw E.flareFallback(e,E.errorFlare.FAILED_LOGOUT)})).finally((function(){return n({type:_.SET_NOT_BUSY,payload:v.BUSY_COMPONENT_AUTH})}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},rn=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return clearTimeout(n().session.workers.refreshTokens)})).then((function(){return t({type:_.STOP_REFRESH_TOKENS_WORKER,payload:{}})})).catch((function(){throw E.errorFlare.ERROR_STOP_TOKEN_REFRESH}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},an=function e(t){return function(){var n=Object(b.a)(h.a.mark((function n(r,a){var o;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=setTimeout(Object(b.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve().then((function(){return r(ge(Te,we,{refreshJwt:a().client.userAccess.refreshJwt}))})).then((function(e){n=e})).then((function(){return r({type:_.REFRESH_TOKENS,payload:n})})).then((function(){return r(e(n.accessJwtExpiry))})).catch((function(e){throw E.flareFallback(e,E.errorFlare.FAILED_LOGIN)})).catch((function(e){console.error(e),r(nn({autoLogin:!0}))}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),t/2),r({type:_.RECEIVE_REFRESH_TOKENS_WORKER,payload:{refreshTokensWorker:o}});case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},on=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.next=3,Promise.resolve().then((function(){return t(ge(_e,Ce,null))})).then((function(e){return e.map((function(e,t){return r[e.channelName]=e.channelMode}))})).then((function(){return t({type:_.RECEIVE_CHANNELS,payload:r})})).catch((function(e){return t(T(E.flareType.ERROR,E.errorFlare.ERR_CHANNEL_FETCH))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},cn=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.next=3,Promise.resolve().then((function(){return t(ge(_e,ct,null))})).then((function(e){return e.map((function(e,t){return r[e.channelName]=e.channelMode}))})).then((function(){return t({type:_.RECEIVE_USER_CHANNELS,payload:r})})).catch((function(e){return t(T(E.flareType.ERROR,E.errorFlare.ERR_USER_CHANNEL_FETCH))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},un=function(e){return function(){var t=Object(b.a)(h.a.mark((function t(n,r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve().then((function(){return n({type:_.SET_BUSY,payload:v.BUSY_COMPONENT_AUTH})})).then((function(){return n(ge(Te,it+"/"+e,{}))})).then((function(){return n(cn())})).catch((function(e){return n(T(E.flareType.ERROR,e))})).finally((function(){return n({type:_.SET_NOT_BUSY,payload:v.BUSY_COMPONENT_AUTH})}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},ln=function(e){return function(){var t=Object(b.a)(h.a.mark((function t(n,r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve().then((function(){if(!ye.channelIsOpen(r().client.userAccess.channels[e]))throw n(Qn("ADD")),E.errorFlare.CHANNEL_CLOSED})).then((function(){return n(ge(Te,ut,{payChannel:e}))})).then((function(e){return n({type:_.RECEIVE_PAY_CHANNEL,payload:{payChannel:e}})})).catch((function(e){if(e!==E.errorFlare.CHANNEL_CLOSED)throw e})).catch((function(e){return n(T(E.flareType.ERROR,E.errorFlare.ERR_PAY_CHANNEL_UPDATE))}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},sn=function(e){return function(){var t=Object(b.a)(h.a.mark((function t(n,r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve().then((function(){if(!e.userId)throw e.loginError})).then((function(){return n({type:_.LOGIN,payload:e})})).then((function(){return n(an(e.accessJwtExpiry))})).then((function(){return n(Zn())})).then((function(){return n(tr())})).then((function(){return n(cn())})).catch((function(){return n(nn({autoLogin:!1}))})).finally((function(){return n({type:_.SET_NOT_BUSY,payload:v.BUSY_COMPONENT_AUTH})}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},pn=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){var r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n().client.userAccess.ethAddress,e.next=3,Promise.resolve().then((function(){return t({type:_.SET_BUSY,payload:v.BUSY_COMPONENT_AUTH})})).then((function(){return t(ge(Te,Ae,{ethAddress:r}))})).then((function(e){a={challengeJwt:e.challengeJwt,hashedJwt:e.hashedJwt}})).then((function(){return t((e=a.hashedJwt,function(){var t=Object(b.a)(h.a.mark((function t(n,r){var a,o;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new Kt.a(Kt.a.givenProvider),o=r().client.userAccess.ethAddress,t.next=4,a.eth.personal.sign(e,o,null);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));var e})).then((function(e){return{ethAddress:r,challengeSolution:{challengeJwt:a.challengeJwt,hashedJwt:a.hashedJwt,signedMessage:e}}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},dn=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return t(pn())})).then((function(e){return t(ge(Te,Pe,e))})).catch((function(e){return t(T(E.flareType.ERROR,E.flareFallback(e,E.errorFlare.FAILED_LOGIN))),{loginError:!0}})).then((function(e){return t(sn(e))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},fn=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return t(pn())})).then((function(e){return t(ge(Te,ke,e))})).catch((function(e){return t(T(E.flareType.ERROR,E.flareFallback(e,E.errorFlare.FAILED_LOGIN))),{loginError:!0}})).then((function(e){return t(sn(e))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},mn=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return t(pn())})).then((function(e){return t(ge(Te,pt,e))})).then((function(){return t(cn())})).catch((function(e){return t(T(E.flareType.ERROR,E.flareFallback(e,E.errorFlare.FAILED_LOGIN))),{loginError:!0}})).finally((function(){return t({type:_.SET_NOT_BUSY,payload:v.BUSY_COMPONENT_AUTH})}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},En=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return t(pn())})).then((function(e){return t(ge(Te,dt,e))})).then((function(){return t(cn())})).catch((function(e){return t(T(E.flareType.ERROR,E.flareFallback(e,E.errorFlare.FAILED_LOGIN))),{loginError:!0}})).finally((function(){return t({type:_.SET_NOT_BUSY,payload:v.BUSY_COMPONENT_AUTH})}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},yn=function(e,t){return function(){var n=Object(b.a)(h.a.mark((function n(r,a){return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.resolve().then((function(){return r({type:_.SET_BUSY,payload:v.BUSY_COMPONENT_AUTH})})).then((function(){return r(ge(Te,Ue,{username:e,password:t}))})).catch((function(e){return r(T(E.flareType.ERROR,E.flareFallback(e,E.errorFlare.FAILED_LOGIN))),{loginError:!0}})).then((function(e){return r(sn(e))}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},hn=function(e,t){return function(){var n=Object(b.a)(h.a.mark((function n(r,a){return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.resolve().then((function(){return r({type:_.SET_BUSY,payload:v.BUSY_COMPONENT_AUTH})})).then((function(){return r(ge(Te,Le,{username:e,password:t}))})).catch((function(e){return r(T(E.flareType.ERROR,E.flareFallback(e,E.errorFlare.FAILED_LOGIN))),{loginError:!0}})).then((function(e){return r(sn(e))}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},bn=function(e,t){return function(){var n=Object(b.a)(h.a.mark((function n(r,a){return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.resolve().then((function(){return r({type:_.SET_BUSY,payload:v.BUSY_COMPONENT_AUTH})})).then((function(){return r(ge(Te,lt,{username:e,password:t}))})).then((function(){return r(cn())})).then((function(){return r(vn())})).catch((function(e){return r(T(E.flareType.ERROR,E.flareFallback(e,E.errorFlare.FAILED_LOGIN))),{loginError:!0}})).finally((function(){return r({type:_.SET_NOT_BUSY,payload:v.BUSY_COMPONENT_AUTH})}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},On=function(e,t){return function(){var n=Object(b.a)(h.a.mark((function n(r,a){return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.resolve().then((function(){return r({type:_.SET_BUSY,payload:v.BUSY_COMPONENT_AUTH})})).then((function(){return r(ge(Te,st,{username:e,password:t}))})).then((function(){return r(cn())})).then((function(){return r(vn())})).catch((function(e){return r(T(E.flareType.ERROR,E.flareFallback(e,E.errorFlare.FAILED_LOGIN))),{loginError:!0}})).finally((function(){return r({type:_.SET_NOT_BUSY,payload:v.BUSY_COMPONENT_AUTH})}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},vn=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return t({type:_.ABANDON_KEYBOARD,payload:{}})}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},_n=function(e){return function(){var t=Object(b.a)(h.a.mark((function t(n,r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve().then((function(){return n({type:_.CHOOSE_KEYBOARD,payload:e})}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},Tn=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return t(_n({}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},In=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return t(_n({}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Nn=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return t(_n({optionKeyboardMode:$.optionKeyboardMode.ADD}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},gn=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return t(_n({optionKeyboardMode:$.optionKeyboardMode.UPDATE}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Rn=function(e,t){return function(){var n=Object(b.a)(h.a.mark((function n(r,a){var o;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o={},n.next=3,Promise.resolve().then((function(){o.facebookStatus=e.status,o.facebookUserId=e.authResponse?e.authResponse.userID:null,o.facebookUserAccessToken=e.authResponse?e.authResponse.accessToken:null})).then((function(){return r({type:_.RECEIVE_FACEBOOK_LOGIN_STATUS,payload:o})})).then((function(){return t(o.facebookStatus)}));case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},Sn=function(e){return function(){var t=Object(b.a)(h.a.mark((function t(n,r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve().then((function(){if(!window.FB)throw E.errorFlare.FB_NOT_FOUND})).then((function(){return new Promise((function(e){window.FB.getLoginStatus((function(t){return n(Rn(t,e))}))}))})).then((function(t){return e&&e(t),t}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},An=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return t(Sn(null))})).then((function(e){if(e===Jt.connected)return new Promise((function(e){window.FB.logout((function(){return e(),!1}))}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Cn=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return t({type:_.SET_BUSY,payload:v.BUSY_COMPONENT_AUTH})})).then((function(){if(!window.FB)throw E.errorFlare.FB_NOT_FOUND})).then((function(){return t(Sn(null))})).then((function(e){if(e===Jt.unknown||e===Jt.not_authorized)return t(function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return new Promise((function(e){window.FB.login((function(){return t(Sn(e))}),{scope:$t})}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())})).then((function(){return{facebookUserId:n().client.userAccess.facebookUserId,facebookUserAccessToken:n().client.userAccess.facebookUserAccessToken}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},wn=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return t(Sn(null))})).then((function(e){return new Promise((function(t){e===Jt.connected&&window.FB.api(Xt,(function(e){return t(e)}))}))})).then((function(e){return{name:e.first_name,surname:e.last_name,email:e.email}})).then((function(e){return t(er(e,{overwrite:!1}))})).catch((function(e){t(T(E.flareType.ERROR,E.errorFlare.FB_NOT_FOUND))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},xn=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return t(Cn())})).then((function(e){return t(ge(Te,je,e))})).catch((function(e){return t(T(E.flareType.ERROR,E.flareFallback(e,E.errorFlare.FAILED_LOGIN))),{loginError:!0}})).then((function(e){return t(sn(e))})).then((function(){return t(wn())}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Pn=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return t(Cn())})).then((function(e){return t(ge(Te,Fe,e))})).catch((function(e){return t(T(E.flareType.ERROR,E.flareFallback(e,E.errorFlare.FAILED_LOGIN))),{loginError:!0}})).then((function(e){return t(sn(e))})).then((function(){return t(wn())}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},kn=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return t(Cn())})).then((function(e){return t(ge(Te,ft,e))})).then((function(){return t(cn())})).catch((function(e){return t(T(E.flareType.ERROR,E.flareFallback(e,E.errorFlare.FAILED_LOGIN))),{loginError:!0}})).then((function(){return t(wn())})).finally((function(){return t({type:_.SET_NOT_BUSY,payload:v.BUSY_COMPONENT_AUTH})}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Un=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return t(Cn())})).then((function(e){return t(ge(Te,mt,e))})).then((function(){return t(cn())})).catch((function(e){return t(T(E.flareType.ERROR,E.flareFallback(e,E.errorFlare.FAILED_LOGIN))),{loginError:!0}})).then((function(){return t(wn())})).finally((function(){return t({type:_.SET_NOT_BUSY,payload:v.BUSY_COMPONENT_AUTH})}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Ln=function(e,t){return function(){var n=Object(b.a)(h.a.mark((function n(r,a){var o;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=null,n.next=3,Promise.resolve().then((function(){if(e.data.origin&&"THRUBI"===e.data.origin)return e.data;throw E.errorFlare.MESSAGE_IGNORED})).then((function(e){r({type:_.RECEIVE_LINKEDIN_LOGIN,payload:e})})).then((function(){o=a().client.userAccess.linkedInListener})).then((function(){window.removeEventListener("message",o)})).then((function(){return a().client.userAccess.linkedInWindow})).then((function(e){e.close()})).then((function(){return r({type:_.CLEAR_LINKEDIN_WINDOW_AND_LISTENER,payload:{}})})).then((function(){t()})).catch((function(){return null}));case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},jn=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){var r,a,o,c,u;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,a=null,o=null,c=null,u=new Promise((function(e){return c=e})),e.next=7,Promise.resolve().then((function(){return t({type:_.SET_BUSY,payload:v.BUSY_COMPONENT_AUTH})})).then((function(){r=n().client.userAccess.linkedInWindow})).then((function(){return null===r||r.closed})).then((function(e){e&&(r=window.open(zt(Zt,"ec178df0ec26b9584b3702c8ee98071f76f40b11121c19ff18f674b16169a9e95fee8b82a6334152ba70565c41cf0d1a0b33ff9dda5298a34ce271008e8c09f7","78w03u1p8bc928"),"Login to Thrubi using your LinkedIn account","toolbar=no, menubar=no, width=600, height=500, top=50, left=100"))})).then((function(){return r.focus()})).then((function(){o=setInterval((function(){r.closed&&(c(),clearInterval(o))}),500)})).then((function(){a=function(e){return t(Ln(e,c))}})).then((function(){window.addEventListener("message",a)})).then((function(){return t({type:_.RECEIVE_LINKEDIN_WINDOW_AND_LISTENER,payload:{linkedInWindow:r,linkedInListener:a}})})).then((function(){return u})).then((function(){return{linkedInCode:n().client.userAccess.linkedInCode,linkedInState:n().client.userAccess.linkedInState}}));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Fn=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return t(jn())})).then((function(e){return t(ge(Te,Be,e))})).catch((function(e){return t(T(E.flareType.ERROR,E.flareFallback(e,E.errorFlare.FAILED_LOGIN))),{loginError:!0}})).then((function(e){return t(sn(e))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Bn=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return t(jn())})).then((function(e){return t(ge(Te,De,e))})).catch((function(e){return t(T(E.flareType.ERROR,E.flareFallback(e,E.errorFlare.FAILED_LOGIN))),{loginError:!0}})).then((function(e){return t(sn(e))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Dn=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return t(jn())})).then((function(e){return t(ge(Te,Et,e))})).then((function(){return t(cn())})).catch((function(e){return t(T(E.flareType.ERROR,E.flareFallback(e,E.errorFlare.FAILED_LOGIN))),{loginError:!0}})).finally((function(){return t({type:_.SET_NOT_BUSY,payload:v.BUSY_COMPONENT_AUTH})}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Mn=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return t(jn())})).then((function(e){return t(ge(Te,yt,e))})).then((function(){return t(cn())})).catch((function(e){return t(T(E.flareType.ERROR,E.flareFallback(e,E.errorFlare.FAILED_LOGIN))),{loginError:!0}})).finally((function(){return t({type:_.SET_NOT_BUSY,payload:v.BUSY_COMPONENT_AUTH})}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Gn=function(e,t){return function(){var n=Object(b.a)(h.a.mark((function n(r,a){var o;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=null,n.next=3,Promise.resolve().then((function(){if(e.data.origin&&"THRUBI"===e.data.origin)return console.error(e.data),e.data;throw E.errorFlare.MESSAGE_IGNORED})).then((function(e){r({type:_.RECEIVE_GOOGLE_LOGIN,payload:e})})).then((function(){o=a().client.userAccess.googleListener})).then((function(){window.removeEventListener("message",o)})).then((function(){return a().client.userAccess.googleWindow})).then((function(e){e.close()})).then((function(){return r({type:_.CLEAR_GOOGLE_WINDOW_AND_LISTENER,payload:{}})})).then((function(){t()})).catch((function(){return null}));case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},Yn=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){var r,a,o,c,u;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,a=null,o=null,c=null,u=new Promise((function(e){return c=e})),e.next=7,Promise.resolve().then((function(){return t({type:_.SET_BUSY,payload:v.BUSY_COMPONENT_AUTH})})).then((function(){r=n().client.userAccess.googleWindow})).then((function(){return null===r||r.closed})).then((function(e){e&&(r=window.open(Qt(en,"627523329723-5kfvuqg068851dsf6efh911ue4v7ttur.apps.googleusercontent.com"),"Login to Thrubi using your Google account","toolbar=no, menubar=no, width=600, height=500, top=50, left=100"))})).then((function(){return r.focus()})).then((function(){o=setInterval((function(){r.closed&&(c(),clearInterval(o))}),500)})).then((function(){a=function(e){return t(Gn(e,c))}})).then((function(){window.addEventListener("message",a)})).then((function(){return t({type:_.RECEIVE_GOOGLE_WINDOW_AND_LISTENER,payload:{googleWindow:r,googleListener:a}})})).then((function(){return u})).then((function(){return{googleCode:n().client.userAccess.googleCode}}));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Hn=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return t(Yn())})).then((function(e){return t(ge(Te,Me,e))})).catch((function(e){return t(T(E.flareType.ERROR,E.flareFallback(e,E.errorFlare.FAILED_LOGIN))),{loginError:!0}})).then((function(e){return t(sn(e))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Vn=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return t(Yn())})).then((function(e){return t(ge(Te,Ge,e))})).catch((function(e){return t(T(E.flareType.ERROR,E.flareFallback(e,E.errorFlare.FAILED_LOGIN))),{loginError:!0}})).then((function(e){return t(sn(e))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Kn=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return t(Yn())})).then((function(e){return t(ge(Te,ht,e))})).then((function(){return t(cn())})).catch((function(e){return t(T(E.flareType.ERROR,E.flareFallback(e,E.errorFlare.FAILED_LOGIN))),{loginError:!0}})).finally((function(){return t({type:_.SET_NOT_BUSY,payload:v.BUSY_COMPONENT_AUTH})}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Wn=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return t(Yn())})).then((function(e){return t(ge(Te,bt,e))})).then((function(){return t(cn())})).catch((function(e){return t(T(E.flareType.ERROR,E.flareFallback(e,E.errorFlare.FAILED_LOGIN))),{loginError:!0}})).finally((function(){return t({type:_.SET_NOT_BUSY,payload:v.BUSY_COMPONENT_AUTH})}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},qn=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Jn=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Xn=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},$n=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},zn=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return window.location.search})).then((function(e){return JSON.parse('{"'+decodeURI(e).replace("?","").replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')})).then((function(e){return{code:e.code,state:e.state,origin:"THRUBI"}})).then((function(e){window.opener&&window.opener.postMessage(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Qn=function(e){return function(){var t=Object(b.a)(h.a.mark((function t(n,r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n({type:_.SWITCH_OPTION_USER_MENU,payload:{optionUserMenu:e}}));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},Zn=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.next=3,Promise.resolve().then((function(){return t(ge(_e,tt,null))})).then((function(e){return e.map((function(e,t){return r[e.detailName]=e.detailValue}))})).then((function(){return t({type:_.RECEIVE_USER_DETAILS,payload:r})})).catch((function(e){return t(T(E.flareType.ERROR,E.errorFlare.ERR_USER_DETAILS))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},er=function(e,t){return function(){var n=Object(b.a)(h.a.mark((function n(r,a){return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.resolve().then((function(){return r({type:_.SET_BUSY,payload:v.BUSY_ACTION_USERDETAILS})})).then((function(){return r(ge(Te,rt,Object.assign({},{userDetails:e},t)))})).then((function(){return r(Zn())})).catch((function(e){return r(T(E.flareType.ERROR,E.errorFlare.ERR_USER_DETAILS))})).finally((function(){return r({type:_.SET_NOT_BUSY,payload:v.BUSY_ACTION_USERDETAILS})}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},tr=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=setInterval(function(){var e,n=function(){return Promise.resolve().then((function(){return t(ge(_e,Qe,null))})).then((function(t){return e=t})).then((function(){return t((n=e,function(){var e=Object(b.a)(h.a.mark((function e(t,r){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object.keys(W).map(function(){var e=Object(b.a)(h.a.mark((function e(a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r().client.user[a]||n[a]===r().client.user[a]){e.next=4;break}return e.next=3,t(T(E.flareType.INFO,q(n[a],a)));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));var n})).then((function(){return t({type:_.RECEIVE_USER_FLAGS,payload:e})})).catch((function(e){return t(T(E.flareType.ERROR,E.errorFlare.ERR_USER_FLAGS))}))};return n(),n}(),1e3),t({type:_.RECEIVE_USER_WORKER,payload:{userWorker:r}});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},nr=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:clearInterval(n().session.workers.user),t({type:_.STOP_USER_WORKER,payload:{}});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},rr=function(e){function t(){return Object(le.a)(this,t),Object(pe.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(fe.a)(t,e),Object(se.a)(t,[{key:"render",value:function(){var e,t=this.props,n=t.mCurrent,r=t.ccySymbol,c=t.declareIncomeBusy,u=t.incomeApproved,i=this.props.declareIncome;return o.a.createElement("div",{className:"navbar-light col-lg-4 container-fluid row m-0"},c?"Busy processing income declaration":o.a.createElement(a.Fragment,null,o.a.createElement("div",{className:"col-lg-12"},o.a.createElement(Ht,{text:"Declared income",bold:!1,value:n,ccySymbol:r})),o.a.createElement("div",{className:"col-lg-12 small"},"Your income is currently:\xa0",o.a.createElement("span",{className:"badge "+(u>0?"badge-info":"badge-danger")},u>0?"Officially approved":u<0?"Pending approval":"Not approved")),o.a.createElement("div",{className:"col-lg-12"},o.a.createElement("div",{className:"row"},o.a.createElement("input",{ref:function(t){return e=t},type:"text",className:"form-control form-control-sm rounded-0 m-0",placeholder:n.toFixed(2)+" "+r,required:!0}))),o.a.createElement("div",{className:"col-lg-12 p-0 m-0"},o.a.createElement(he,{text:"Declare new income",action:function(){return i(e.value)},buttonType:"btn-primary m-0"}))))}}]),t}(a.Component),ar=Object(s.b)((function(e){return{ccySymbol:e.client.population.ccySymbol,mCurrent:e.client.member.mCurrent,incomeApproved:e.client.user.incomeApproved,declareIncomeBusy:e.session.busy.action.declareIncome}}),{declareIncome:function(e){return function(){var t=Object(b.a)(h.a.mark((function t(n,r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.resolve().then((function(){return n({type:_.SET_BUSY,payload:v.BUSY_ACTION_DECLAREINCOME})})).then((function(){return n(ge(Te,Je+"/"+r().client.population.id+"/"+e,null))})).catch((function(e){return n(T(E.flareType.ERROR,E.flareType.ERR_GENERIC_USERMENU))})).finally((function(){return n({type:_.SET_NOT_BUSY,payload:v.BUSY_ACTION_DECLAREINCOME})})));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}})(rr),or=Object(s.b)((function(e){return{countryName:e.client.population.countryName,ccyId:e.client.population.ccyId,ccySymbol:e.client.population.ccySymbol,busy:e.session.busy.component.viewport,loggedIn:e.client.userAccess.loggedIn,populationId:e.client.population.id}}),{})((function(e){var t=e.countryName,n=e.ccyId,r=e.busy,c=e.loggedIn,u=e.populationId;return o.a.createElement("div",{className:"container-fluid row p-0 m-0 text-primary text-center p-0 mt-3"},r?"Viewport loading...":!c||u<0?"":o.a.createElement(a.Fragment,null,o.a.createElement("div",{className:"col-lg-12 p-0 m-0 bg-primary text-light text-center mb-3"},o.a.createElement("div",null,o.a.createElement("b",null,t),"\xa0",o.a.createElement("small",null,n,"\xa0",o.a.createElement("i",null,"pid#",u)))),o.a.createElement(Yt,null),o.a.createElement(ar,null),o.a.createElement(Gt,null)))})),cr=function(e){var t=e.columnSize,n=(e.color,e.activeFilter),r=e.checkedFilter,a=e.action,c=e.elements;return o.a.createElement("div",{"data-toggle":"buttons",className:"btn btn-block btn-group btn-group-toggle border-0 row p-0 m-0 my-2"},c.map((function(e,c){return o.a.createElement("button",{key:e.key,id:e.key,onClick:function(t){t.preventDefault(),a(e.key)},defaultChecked:r===e.key,disabled:!1,className:"btn btn-sm btn-block small rounded-0 p-0 m-0 py-2 "+e.color+" "+t+(n===e.key?" active":"")},o.a.createElement("div",{className:"container row p-0 m-0"+(e.channel?"":" fullWidth")},o.a.createElement("div",{className:e.channel?"":"fullWidth"},e.channel?o.a.createElement("img",{className:"p-0 my-0 mx-2",alt:e.channel,height:"32",width:"32",src:"/thrubi-client/png/"+ye.channelColor(e.channel)+".png"}):"",o.a.createElement("div",{className:(e.channel?"ml-4":"fullWidth")+" displayInlineBlock text-"+(e.channel?"left":"center")},e.text))))})))},ur=function(e){var t=e.text,n=e.action,r=e.abandonAction,a=e.buttonType,c=e.abandonButtonType,u={username:null,password:null};return o.a.createElement("div",null,o.a.createElement("input",{id:"username",ref:function(e){return u.username=e},type:"text",className:"form-control form-control-sm my-2",placeholder:"username",required:!0}),o.a.createElement("input",{id:"password",ref:function(e){return u.password=e},type:"text",className:"form-control form-control-sm my-2",placeholder:"password",required:!0}),o.a.createElement(he,{text:t,action:function(){n(u.username.value,u.password.value)},buttonType:a}),o.a.createElement(he,{text:"Back",action:r,buttonType:c}))},ir=function(e){function t(){return Object(le.a)(this,t),Object(pe.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(fe.a)(t,e),Object(se.a)(t,[{key:"componentDidUpdate",value:function(){var e=this.props,t=e.busy,n=e.loggedIn,r=e.autoLogin,a=e.ethAddress,o=this.props.loginBlockchainEthereum;!t&&!n&&r&&a&&o()}},{key:"componentWillUnmount",value:function(){(0,this.props.logout)({autoLogin:!1})}},{key:"authFunction",value:function(e,t){return this.props[e.toLowerCase()+ye.channelAuthFunctionName(t)]}},{key:"render",value:function(){var e=this,t=this.props,n=t.busy,r=t.loggedIn,c=t.optionLoginCreate,u=t.optionKeyboardMode,i=t.optionUserMenu,l=t.payChannel,s=t.channels,p=this.props,d=p.switchOptionLoginCreate,f=p.switchOptionUserMenu,m=p.abandonKeyboard,E=p.setPayChannel,y=p.deleteChannel,h=p.logout;return o.a.createElement("div",{className:"text-center small text-dark"},n?"Auth module busy...":o.a.createElement(a.Fragment,null,null===u?"":o.a.createElement(ur,{text:ye.keyboardChannelMessage(u),action:this.props[u.toLowerCase()+"KeyboardForm"],buttonType:"btn btn-sm p-0 btn-primary",abandonAction:m,abandonButtonType:"btn btn-sm p-0 btn-secondary"}),null!==u||r?"":o.a.createElement(a.Fragment,null,Object.keys(s).map((function(t){return ye.channelIsForLogin(s[t])?o.a.createElement(he,{channel:t,text:ye.channelUserFriendlyName(t,c),key:(c===$.optionLoginCreate.LOGIN?"login":"create")+t,action:e.authFunction(c,t),buttonType:"btn btn-sm p-0 btn-"+(c===$.optionLoginCreate.LOGIN?"":"outline-")}):""}))),r?"":o.a.createElement(he,{text:c===$.optionLoginCreate.LOGIN?"I am new to Thrubi":"I already have a Thrubi account",action:d,buttonType:"nav-link border-0 text-small text-primary"}),null===u&&r?o.a.createElement(a.Fragment,null,o.a.createElement(he,{text:"Logout",action:h,payload:{autoLogin:!1},buttonType:"btn btn-sm p-0 btn-secondary"}),o.a.createElement(cr,{columnSize:"col-lg-6",activeFilter:i,checkedFilter:i,action:f,elements:[{color:"btn-outline-primary",key:$.optionUserMenu.USER,text:"My account",disabledFilter:i===$.optionUserMenu.USER},{color:"btn-outline-primary",key:$.optionUserMenu.PAY,text:"Payment",disabledFilter:i===$.optionUserMenu.PAY},{color:"btn-outline-primary",key:$.optionUserMenu.MANAGE,text:"Manage login credentials",disabledFilter:i===$.optionUserMenu.MANAGE},{color:"btn-outline-primary",key:$.optionUserMenu.ADD,text:"Connect login credentials",disabledFilter:i===$.optionUserMenu.ADD}]}),i===$.optionUserMenu.USER?"":o.a.createElement(a.Fragment,null,i!==$.optionUserMenu.PAY?"":o.a.createElement("div",{className:"my-4"},"My payment method:",o.a.createElement(cr,{columnSize:"col-lg-12",activeFilter:l,checkedFilter:l,action:E,elements:Object.keys(s).map((function(e){return ye.channelIsForPay(s[e])?{key:e,channel:e,color:"btn-"+(ye.channelIsOpen(s[e])?"":"outline-")+ye.channelColor(e),disabledFilter:e===l,text:ye.channelUserFriendlyName(e,e===l?"USING":ye.channelIsOpen(s[e])?"USE":"LINK")}:null})).filter((function(e){return null!==e}))})),o.a.createElement("div",{className:"my-4"},[{mode:"UPDATE",action:function(t){return e.props["update"+ye.channelAuthFunctionName(t)]},color:"",filter:function(e){return i===$.optionUserMenu.MANAGE&&(ye.channelIsForLogin(e)||ye.channelIsForPay(e))&&ye.channelIsOpen(e)}},{mode:"ADD",action:function(t){return e.props["add"+ye.channelAuthFunctionName(t)]},color:"outline-",filter:function(e){return i===$.optionUserMenu.ADD&&!ye.channelIsOpen(e)}},{mode:"DELETE",action:function(e){return function(){return y(e)}},color:"outline-",filter:function(e){return i===$.optionUserMenu.MANAGE&&(ye.channelIsForLogin(e)||ye.channelIsForPay(e))&&ye.channelIsOpen(e)}}].map((function(e){return o.a.createElement("div",{key:e.mode},Object.keys(s).map((function(t){return e.filter(s[t])?o.a.createElement(he,{channel:t,text:ye.channelUserFriendlyName(t,e.mode),action:e.action(t),key:e.mode+t,buttonType:"btn btn-sm p-0 btn-"+e.color}):""})))}))))):""))}}]),t}(a.Component),lr=Object(s.b)((function(e){return{busy:e.session.busy.component.auth,ethAddress:e.client.userAccess.ethAddress,optionLoginCreate:e.client.user.optionLoginCreate,optionKeyboardMode:e.client.user.optionKeyboardMode,optionUserMenu:e.client.user.optionUserMenu,loggedIn:e.client.userAccess.loggedIn,autoLogin:e.client.userAccess.autoLogin,payChannel:e.client.userAccess.payChannel,channels:e.client.userAccess.channels}}),Object.assign({},r,{switchOptionUserMenu:Qn}))(ir),sr=function(e){function t(){return Object(le.a)(this,t),Object(pe.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(fe.a)(t,e),Object(se.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"container-fluid"},o.a.createElement("div",{className:"row py-2 rounded-bottom"},o.a.createElement("div",{className:"col-lg-4 p-0 navbar-light"},o.a.createElement("div",{className:"mx-2 thrubiBlue"},o.a.createElement("div",{style:{backgroundImage:"url(/thrubi-client/jpg/crowd.jpg)"},className:"border-0 container-fluid align-top m-0 everybody"}),o.a.createElement("div",{className:"border-0 container-fluid align-top m-0 overflow-hidden topLeft p-4 text-primary"},o.a.createElement("div",{className:"opaque"},o.a.createElement("h3",null,"Everybody"),o.a.createElement("p",null,"Be part of the sustainable societies of the future. If your country has adhered to a Thrubi plan, you will be awarded Thrubi Blue each month, based on your current income. Your Thrubi Blue will in turn give you the rights to regular payments. Nobody can be extremely poor or extremely rich with Thrubi."),o.a.createElement(he,{text:"Learn more",action:function(){},buttonType:"btn-outline-primary"}))))),o.a.createElement("div",{className:"col-lg-4 p-0 navbar-light"},o.a.createElement("div",{className:"mx-2 thrubiSilver"},o.a.createElement("div",{style:{backgroundImage:"url(/thrubi-client/jpg/bloomberg.jpg)"},className:"border-0 container-fluid align-top m-0 wealthy"}),o.a.createElement("div",{className:"border-0 container-fluid align-top m-0 overflow-hidden topLeft p-4 text-secondary"},o.a.createElement("div",{className:"opaque"},o.a.createElement("h3",null,"Wealthy individuals"),o.a.createElement("p",null,"If you are an investor, choose a sustainable future. As a wealthy individual, you will have access to purchasing Thrubi Gold, the investment tool of sustainable societies. Thrubi Gold can only be purchased by redeeming Thrubi Silver, which you will be awarded according to your current income. Governments are accepting Thrubi Gold to pay tax duties."),o.a.createElement(he,{text:"Learn more",action:function(){},buttonType:"btn-outline-secondary"}))))),o.a.createElement("div",{className:"col-lg-4 p-0 navbar-light"},o.a.createElement("div",{className:"mx-2 thrubiGold"},o.a.createElement("div",{style:{backgroundImage:"url(/thrubi-client/jpg/futuristic.jpg)"},className:"border-0 container-fluid align-top m-0 societies"}),o.a.createElement("div",{className:"border-0 container-fluid align-top m-0 overflow-hidden topLeft p-4 text-success"},o.a.createElement("div",{className:"opaque"},o.a.createElement("h3",null,"Thriving societies"),o.a.createElement("p",null,"If you are a sovereign government, you want your people to be at their best. Thrubi stabilizes a country's income distribution. Growth is shared amongst all participants of a society in a non-equal fashion: people with a higher net worth will stay richer. Thrubi, however, will ensure that a society becomes richer as a whole."),o.a.createElement(he,{text:"Learn more",action:function(){},buttonType:"btn-outline-success"})))))))}}]),t}(a.Component),pr=Object(s.b)((function(e){return{}}),{})(sr),dr=function(e){function t(){return Object(le.a)(this,t),Object(pe.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(fe.a)(t,e),Object(se.a)(t,[{key:"render",value:function(){var e=this.props,t=e.role,n=e.deactivated;return o.a.createElement("img",{className:"mt-3 rounded-lg",alt:t+n,height:"128",width:"128",src:"/thrubi-client/jpg/elio.jpg"})}}]),t}(a.Component),fr=Object(s.b)((function(e){return{role:e.client.user.role?"admin":"user",deactivated:e.client.user.deactivated?"_deactivated":""}}),{})(dr),mr=function(e){function t(){return Object(le.a)(this,t),Object(pe.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(fe.a)(t,e),Object(se.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.name,r=e.surname,a=e.email,c=e.document,u=e.deactivated,i=e.emailVerified,l=e.identityCertified;return o.a.createElement("div",{className:"text-center mb-2"},o.a.createElement("div",{className:"text-primary displayInlineBlock p-0"},o.a.createElement("b",null,n||r?(n||"")+" "+(r||""):"No user data"),"\xa0"),o.a.createElement("div",{className:"text-secondary displayInlineBlock small"},"uid#",t,"\xa0",o.a.createElement("span",{className:"badge "+(u?"badge-danger":"badge-info")},u?"Deactivated":"Active account")),o.a.createElement("div",{className:"text-secondary small"},"email: ",a||"not found","\xa0",o.a.createElement("span",{className:"badge "+(i?"badge-info":"badge-danger")},i?"Email verified":"Pending verification")),o.a.createElement("div",{className:"text-secondary small"},"document#",c||"not found","\xa0",o.a.createElement("span",{className:"badge "+(l>0?"badge-info":"badge-danger")},l>0?"Identity certified":l<0?"Pending certification":"Not certified")))}}]),t}(a.Component),Er=Object(s.b)((function(e){return{id:e.client.user.id,name:e.client.user.name,surname:e.client.user.surname,email:e.client.user.email,document:e.client.user.document,deactivated:e.client.user.deactivated,emailVerified:e.client.user.emailVerified,identityCertified:e.client.user.identityCertified}}))(mr),yr=function(e){function t(){return Object(le.a)(this,t),Object(pe.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(fe.a)(t,e),Object(se.a)(t,[{key:"render",value:function(){var e=this.props,t=e.busy,n=e.loggedIn;return o.a.createElement("div",{className:"text-center"},t?o.a.createElement("div",null,"Dashboard loading..."):n?o.a.createElement("div",null,o.a.createElement(fr,null),o.a.createElement(Er,null)):o.a.createElement("div",null,"User not logged in"))}}]),t}(a.Component),hr=Object(s.b)((function(e){return{busy:e.session.busy.component.dashboard,loggedIn:e.client.userAccess.loggedIn,role:e.client.user.role}}))(yr),br=Object(s.b)((function(e){return{deactivated:e.client.user.deactivated,activateUserBusy:e.session.busy.action.activateUser}}),{activateUser:function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return t({type:_.SET_BUSY,payload:v.BUSY_ACTION_ACTIVATEUSER})})).then((function(){return t({type:_.CLEAR_POPULATION,payload:{}})})).then((function(){return t(ge(Te,Ze,null))})).then((function(){return t({type:_.SET_USER_ACTIVATED,payload:{}})})).catch((function(e){throw E.flareFallback(e,E.errorFlare.USER_ACTIVATION)})).finally((function(){return t({type:_.SET_NOT_BUSY,payload:v.BUSY_ACTION_ACTIVATEUSER})}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},deactivateUser:function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return t({type:_.SET_BUSY,payload:v.BUSY_ACTION_ACTIVATEUSER})})).then((function(){return t({type:_.CLEAR_POPULATION,payload:{}})})).then((function(){return t(ge(Te,et,{activationState:J}))})).then((function(){return t({type:_.SET_USER_DEACTIVATED,payload:{}})})).catch((function(e){throw E.flareFallback(e,E.errorFlare.USER_ACTIVATION)})).finally((function(){return t({type:_.SET_NOT_BUSY,payload:v.BUSY_ACTION_ACTIVATEUSER})}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}})((function(e){var t=e.deactivated,n=e.activateUserBusy,r=e.activateUser,c=e.deactivateUser;return o.a.createElement(a.Fragment,null,n?"Please wait, activation request in progress...":t?o.a.createElement(he,{text:"Request activation",action:r,buttonType:"btn-primary"}):o.a.createElement(he,{text:"Deactivate my account",action:c,buttonType:"btn-secondary"}))})),Or=Object(s.b)((function(e){return{updateUserBusy:e.session.busy.action.userDetails,name:e.client.user.name,surname:e.client.user.surname,email:e.client.user.email,document:e.client.user.document}}),{storeDetails:er,deleteDetails:function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return t({type:_.SET_BUSY,payload:v.BUSY_ACTION_USERDETAILS})})).then((function(){return t(ge(Te,nt,null))})).then((function(){return t({type:_.DELETE_USER_DETAILS,payload:{}})})).catch((function(e){return t(T(E.flareType.ERROR,E.errorFlare.ERR_USER_DETAILS))})).finally((function(){return t({type:_.SET_NOT_BUSY,payload:v.BUSY_ACTION_USERDETAILS})}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}})((function(e){var t=e.updateUserBusy,n=e.name,r=e.surname,c=e.email,u=e.document,i=e.storeDetails,l=e.deleteDetails,s={name:n,surname:r,email:c},p="form-control form-control-sm rounded-0";return o.a.createElement(a.Fragment,null,t?"Updating user data...":o.a.createElement(a.Fragment,null,o.a.createElement("input",{id:"inputUserName",ref:function(e){return s.name=e},type:"text",className:p,placeholder:n||"Enter name"}),o.a.createElement("input",{id:"inputUserSurname",ref:function(e){return s.surname=e},type:"text",className:p,placeholder:r||"Enter surname"}),o.a.createElement("input",{id:"inputUserEmail",ref:function(e){return s.email=e},type:"text",className:p,placeholder:c||"Enter email address"}),o.a.createElement("input",{id:"inputUserDocument",disabled:!0,type:"text",className:p,placeholder:u||"Identity not verified"}),o.a.createElement(he,{text:"Update my personal data",buttonType:"btn-primary",action:function(){var e={};s.name.value&&(e.name=s.name.value),s.surname.value&&(e.surname=s.surname.value),s.email.value&&(e.email=s.email.value),i(e,{overwrite:!0})}}),o.a.createElement(he,{text:"Delete my personal data",action:l,buttonType:"btn-secondary"})))})),vr=function(e){function t(){return Object(le.a)(this,t),Object(pe.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(fe.a)(t,e),Object(se.a)(t,[{key:"render",value:function(){var e=this.props,t=e.identityCertified,n=e.countryName,r=this.props.uploadDocument;return o.a.createElement(a.Fragment,null,o.a.createElement("div",{className:"my-3"},"You are applying to become a Thrubi member in the following country: ",o.a.createElement("b",null,n)),o.a.createElement(he,{text:0===t?"Upload a document to start the identity certification procedure":"Thrubi is certifying your identity",disabled:0!==t,buttonType:"btn-primary",action:r}))}}]),t}(a.Component),_r=Object(s.b)((function(e){return{identityCertified:e.client.user.identityCertified,countryName:e.client.population.countryName}}),{uploadDocument:function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return t(er(Object(A.a)({},X,!0),{overwrite:!0}))})).then((function(){return t(ge(Te,at,{}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}})(vr),Tr=function(e){function t(e){var n;return Object(le.a)(this,t),(n=Object(pe.a)(this,Object(de.a)(t).call(this,e))).state={claimProcedureActive:!1},n}return Object(fe.a)(t,e),Object(se.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.busy,r=t.populationId,c=t.claimBusy,u=t.thrubiBlueEth,i=t.ccySymbol,l=t.exrate,s=t.claim;return o.a.createElement("div",{className:"claimItem"},n?"Claim loading...":-1===r?"Please select a population, first.":c?"Busy processing claim":o.a.createElement("div",{className:"text-primary"},this.state.claimProcedureActive?o.a.createElement(a.Fragment,null,o.a.createElement("div",{className:"small text-justify"},"Fees will be deducted to pay for the blockchain transaction. The remaining \u039e will be credited in full, values in ",i," are just an indication."),o.a.createElement("div",{className:"container"},o.a.createElement(Ht,{text:"You can claim",bold:!1,value:u,ccySymbol:"\u039e"}),o.a.createElement(Ht,{text:"Claimable in "+i,bold:!1,value:u*l,ccySymbol:i})),o.a.createElement(he,{action:s,disabled:!u,buttonType:"btn btn-sm p-0 btn-block btn-"+(u?"primary":"light"),text:u?"Claim your "+u.toFixed(2)+" \u039e":"Nothing to claim"})):"",o.a.createElement(he,{disabled:!u&&!this.state.claimProcedureActive,buttonType:"btn-"+(this.state.claimProcedureActive?"":"outline-")+"primary"+(u?" active":""),text:this.state.claimProcedureActive?"Close":u?"Activate claim procedure":"Nothing to claim",action:function(){e.setState({claimProcedureActive:!e.state.claimProcedureActive})}})))}}]),t}(a.Component),Ir=Object(s.b)((function(e){return{busy:e.session.busy.component.claim,populationId:e.client.population.id,claimBusy:e.session.busy.action.claim,thrubiBlueEth:e.client.member.thrubiBlueEth,ccySymbol:e.client.population.ccySymbol,exrate:e.global.market.exrate}}),{claim:function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){var r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n().client.userAccess.ethAddress,a=n().client.population.id,e.next=4,t(ge(_e,We+"/"+r+"/"+a,null));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}})(Tr),Nr=function(e){var t=e.ccySymbol,n=e.member,r=e.exrate,c=e.optionViewHistory,u=e.optionAdvancedMode;return o.a.createElement("div",{className:"container-fluid"},u?o.a.createElement(a.Fragment,null,o.a.createElement(Ht,{text:"Your \u20bf\u20ae level",bold:!1,value:n.thrubiBlue,ccySymbol:"\u20bf\u20ae"}),o.a.createElement(Ht,{text:"Next month \u20bf\u20ae",bold:!1,value:n.thrubiBlueNext,ccySymbol:"\u20bf\u20ae"}),o.a.createElement(Ht,{text:"Claimable \u039e",bold:!1,value:n.thrubiBlueEth,ccySymbol:"\u039e"}),o.a.createElement(Ht,{text:"\u20bf\u20ae awards",bold:!1,value:n.thrubiBlueAward,ccySymbol:t}),o.a.createElement(Ht,{text:"Claimable in "+t,bold:!0,value:n.thrubiBlueEth*r,ccySymbol:t})):o.a.createElement(a.Fragment,null,o.a.createElement(Ht,{text:"Your \u20bf\u20ae level",bold:!1,value:n.thrubiBlue,ccySymbol:"\u20bf\u20ae"}),o.a.createElement(Ht,{text:"Claimable in "+t,bold:!0,value:n.thrubiBlueEth*r,ccySymbol:t})),c?o.a.createElement(a.Fragment,null,o.a.createElement(Ht,{text:"Total awards",bold:!1,value:n.thrubiBlueAwardTotal,ccySymbol:t}),o.a.createElement(Ht,{text:"Total claimed",bold:!1,value:n.thrubiBlueClaimTotal,ccySymbol:t})):"")},gr=function(e){function t(e){var n;return Object(le.a)(this,t),(n=Object(pe.a)(this,Object(de.a)(t).call(this,e))).state={showPanel:!1,manualPanel:!1},n}return Object(fe.a)(t,e),Object(se.a)(t,[{key:"componentWillUpdate",value:function(){var e=this.props.member;this.state.showPanel!==!e.thrubiBlue||this.state.manualPanel||this.setState({showPanel:!!e.thrubiBlue})}},{key:"render",value:function(){var e=this,t=this.props,n=t.busy,r=t.userLoggedIn,c=t.populationId,u=t.member,i=t.ccySymbol,l=t.exrate,s=t.optionViewHistory,p=t.optionAdvancedMode;return o.a.createElement("div",{className:"text-center text-primary"},o.a.createElement(he,{text:"Blue Thrubi",buttonType:"btn-outline-primary"+(this.state.showPanel?" active":""),disabled:!!u.thrubiBlue,action:function(){e.setState({manualPanel:!0}),e.setState({showPanel:!e.state.showPanel})}}),this.state.showPanel?n?"Member loading...":r?c?o.a.createElement(a.Fragment,null,o.a.createElement(Nr,{member:u,ccySymbol:i,exrate:l,optionViewHistory:s,optionAdvancedMode:p}),o.a.createElement(Ir,null)):"No population selected":"User not logged in":"")}}]),t}(a.Component),Rr=Object(s.b)((function(e){return{busy:e.session.busy.component.dashboard,userLoggedIn:e.client.userAccess.loggedIn,populationId:e.client.population.id,member:e.client.member,ccySymbol:e.client.population.ccySymbol,exrate:e.global.market.exrate,optionViewHistory:e.client.user.optionViewHistory,optionAdvancedMode:e.client.user.optionAdvancedMode}}))(gr),Sr=function(e){function t(e){var n;return Object(le.a)(this,t),(n=Object(pe.a)(this,Object(de.a)(t).call(this,e))).state={transformEthValue:0,transformProcedureActive:!1},n}return Object(fe.a)(t,e),Object(se.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.busy,r=t.transformBusy,c=t.populationId,u=t.exrate,i=t.ccySymbol,l=t.thrubiSilver,s=t.thrubiPriceSilver,p=t.thrubiFees,d=t.transform;return o.a.createElement("div",null,n?"Transform loading...":-1===c?"Please select a population, first.":r?"Busy processing transform request":o.a.createElement(a.Fragment,null,this.state.transformProcedureActive?o.a.createElement(a.Fragment,null,o.a.createElement("div",{className:"small text-justify"},"Blockchain transaction costs will be paid by you upon submitting the transaction. Final transformed $\u20ae will depend upon \u039e exchange rates and $\u20ae price when your transaction is accepted. Any excess \u039e that you transform will be credited on the account and used whenever $\u20ae becomes available."),o.a.createElement("div",{className:"text-secondary container"},o.a.createElement(Ht,{text:"Your \u039e balance",bold:!1,value:0,ccySymbol:"\u039e"}),o.a.createElement(Ht,{text:"\u039e to spend to transform",bold:!1,value:this.state.transformEthValue,ccySymbol:"\u039e"}),o.a.createElement(Ht,{text:"Current value in "+i,bold:!1,value:this.state.transformEthValue*u,ccySymbol:i}),o.a.createElement(Ht,{text:"Thrubi fees ("+(100*p).toFixed(1)+"%)",bold:!1,value:this.state.transformEthValue*u*p,ccySymbol:i}),o.a.createElement(Ht,{text:"You can transform",bold:!1,value:this.state.transformEthValue*u*(1-p)/s,ccySymbol:"$\u20ae"})),o.a.createElement("form",{onSubmit:function(){var t=Object(b.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),d(e.state.transformEthValue);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},o.a.createElement("input",{id:"transformEth",ref:function(t){return e.transformEthRef=t},type:"text",className:"form-control form-control-sm rounded-0",placeholder:this.transformEthValue,required:!0,onChange:function(t){t.preventDefault();var n=parseFloat(e.transformEthRef.value);n||(n=0),e.setState({transformEthValue:n})}}),o.a.createElement("input",{className:"btn btn-sm p-0 rounded-0 btn-block btn-"+(this.state.transformEthValue?"primary":"light"),type:"submit",disabled:!this.state.transformEthValue,value:this.state.transformEthValue?"Transform "+this.state.transformEthValue.toFixed(2)+" \u039e":"Insert an \u039e amount"}))):"",o.a.createElement(he,{disabled:!l&&!this.state.transformProcedureActive,buttonType:"btn-"+(this.state.transformProcedureActive?"":"outline-")+"secondary"+(l?" active":""),text:this.state.transformProcedureActive?"Close":l?"Activate transform procedure":"Nothing to transform",action:function(){return e.setState({transformProcedureActive:!e.state.transformProcedureActive})}})))}}]),t}(a.Component),Ar=Object(s.b)((function(e){return{busy:e.session.busy.component.transform,transformBusy:e.session.busy.action.transform,populationId:e.client.population.id,thrubiSilver:e.client.member.thrubiSilver,thrubiPriceSilver:e.client.population.thrubiPriceSilver,thrubiFees:e.client.population.thrubiFees,ccySymbol:e.client.population.ccySymbol,exrate:e.global.market.exrate}}),{transform:function(e){return function(t,n){var r=n().session.blockchain.thrubiContract.methods.transform,a=n().client.userAccess.ethAddress,o=n().client.population.id,c=n().client.user.id;return new Promise((function(t,n){r(a,o,c).send({from:a,value:1e18*e}).once(Wt,(function(){t()}))}))}}})(Sr),Cr=function(e){var t=e.ccySymbol,n=e.member,r=(e.exrate,e.thrubiPriceSilver),c=e.thrubiPriceGold,u=e.optionViewHistory,i=e.optionAdvancedMode;return o.a.createElement("div",{className:"container"},i?o.a.createElement(a.Fragment,null,o.a.createElement(Ht,{text:"Your $\u20ae",bold:!0,value:n.thrubiSilver,ccySymbol:"$\u20ae"}),o.a.createElement(Ht,{text:"Next month $\u20ae",bold:!1,value:n.thrubiSilverNext,ccySymbol:"$\u20ae"}),o.a.createElement(Ht,{text:"Conversion to gold cost",bold:!1,value:n.thrubiSilver*r,ccySymbol:t}),o.a.createElement(Ht,{text:"Gold value",bold:!1,value:n.thrubiSilver*c,ccySymbol:t}),o.a.createElement(Ht,{text:"Remaining \u039e",bold:!1,value:n.thrubiSilverEth,ccySymbol:"\u039e"})):o.a.createElement(a.Fragment,null,o.a.createElement(Ht,{text:"Your $\u20ae",bold:!0,value:n.thrubiSilver,ccySymbol:"$\u20ae"}),o.a.createElement(Ht,{text:"Conversion to gold cost",bold:!1,value:n.thrubiSilver*r,ccySymbol:t}),o.a.createElement(Ht,{text:"Gold value",bold:!1,value:n.thrubiSilver*c,ccySymbol:t})),u?o.a.createElement(Ht,{text:"Total transformed",bold:!1,value:n.thrubiSilverTransformTotal,ccySymbol:t}):"")},wr=function(e){function t(e){var n;return Object(le.a)(this,t),(n=Object(pe.a)(this,Object(de.a)(t).call(this,e))).state={showPanel:!1,manualPanel:!1},n}return Object(fe.a)(t,e),Object(se.a)(t,[{key:"componentWillUpdate",value:function(){var e=this.props.member;this.state.showPanel!==!e.thrubiSilver||this.state.manualPanel||this.setState({showPanel:!!e.thrubiSilver})}},{key:"render",value:function(){var e=this,t=this.props,n=t.busy,r=t.userLoggedIn,c=t.populationId,u=t.member,i=t.ccySymbol,l=t.exrate,s=t.thrubiPriceSilver,p=t.thrubiPriceGold,d=t.optionViewHistory,f=t.optionAdvancedMode;return o.a.createElement("div",{className:"text-center text-secondary"},o.a.createElement(he,{text:"Silver Thrubi",buttonType:"btn-outline-secondary"+(this.state.showPanel?" active":""),disabled:!!u.thrubiSilver,action:function(){e.setState({manualPanel:!0}),e.setState({showPanel:!e.state.showPanel})}}),this.state.showPanel?n?"Member loading...":r?c<0?"No population selected":o.a.createElement(a.Fragment,null,o.a.createElement(Cr,{member:u,ccySymbol:i,exrate:l,thrubiPriceSilver:s,thrubiPriceGold:p,optionViewHistory:d,optionAdvancedMode:f}),o.a.createElement(Ar,null)):"User not logged in":"")}}]),t}(a.Component),xr=Object(s.b)((function(e){return{busy:e.session.busy.component.dashboard,userLoggedIn:e.client.userAccess.loggedIn,populationId:e.client.population.id,member:e.client.member,ccySymbol:e.client.population.ccySymbol,exrate:e.global.market.exrate,thrubiPriceSilver:e.client.population.thrubiPriceSilver,thrubiPriceGold:e.client.population.thrubiPriceGold,optionViewHistory:e.client.user.optionViewHistory,optionAdvancedMode:e.client.user.optionAdvancedMode}}))(wr),Pr=function(e){var t=e.ccySymbol,n=e.member,r=e.thrubiPriceGold;return o.a.createElement(a.Fragment,null,o.a.createElement("div",{className:"container-fluid"},o.a.createElement(Ht,{text:"Gold \u20b2\u20ae",bold:!0,value:n.thrubiGold,ccySymbol:"\u20b2\u20ae"}),o.a.createElement(Ht,{text:"Market value",bold:!1,value:n.thrubiGold*r,ccySymbol:t})),o.a.createElement(he,{action:function(){},text:"Find gold Thrubi marketplace",buttonType:"btn-outline-success"}))},kr=function(e){function t(e){var n;return Object(le.a)(this,t),(n=Object(pe.a)(this,Object(de.a)(t).call(this,e))).state={showPanel:!1,manualPanel:!1},n}return Object(fe.a)(t,e),Object(se.a)(t,[{key:"componentWillUpdate",value:function(){var e=this.props.member;this.state.showPanel!==!e.thrubiGold||this.state.manualPanel||this.setState({showPanel:!!e.thrubiGold})}},{key:"render",value:function(){var e=this,t=this.props,n=t.busy,r=t.userLoggedIn,c=t.populationId,u=t.member,i=t.ccySymbol,l=t.exrate,s=t.thrubiPriceGold;return o.a.createElement("div",{className:"text-center text-success"},o.a.createElement(he,{text:"Gold Thrubi",buttonType:"btn-outline-success"+(this.state.showPanel?" active":""),disabled:!!u.thrubiGold,action:function(){e.setState({manualPanel:!0}),e.setState({showPanel:!e.state.showPanel})}}),this.state.showPanel?n?"Member loading...":r?c<0?"No population selected":o.a.createElement(a.Fragment,null,o.a.createElement(Pr,{member:u,ccySymbol:i,exrate:l,thrubiPriceGold:s})):"User not logged in":"")}}]),t}(a.Component),Ur=Object(s.b)((function(e){return{busy:e.session.busy.component.dashboard,userLoggedIn:e.client.userAccess.loggedIn,populationId:e.client.population.id,member:e.client.member,ccySymbol:e.client.population.ccySymbol,exrate:e.global.market.exrate,thrubiPriceGold:e.client.population.thrubiPriceGold}}))(kr),Lr=function(e){function t(){return Object(le.a)(this,t),Object(pe.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(fe.a)(t,e),Object(se.a)(t,[{key:"render",value:function(){var e=this.props,t=e.populations,n=e.populationId,r=this.props,a=r.selectPopulation,c=r.deselectPopulation;return t.map((function(e,t){return o.a.createElement("div",{key:t,className:"bg-light p-0 my-2"},o.a.createElement("button",{className:"btn btn-sm m-0 p-0 rounded-0 border-0 btn-block btn-outline-primary"+(n===e.populationId?" active":""),onClick:n===e.populationId?function(){return c(e)}:function(){return a(e)}},o.a.createElement("div",{className:"container-fluid row p-3 m-0"},o.a.createElement("div",{className:"col-lg-1 col-md-2  p-0 m-0 text-center"},e.countryId),o.a.createElement("div",{className:"col-lg-5 col-md-10 p-0 m-0 text-left"}," ",e.countryName),o.a.createElement("div",{className:"col-lg-1 col-md-2  p-0 m-0 text-center"},e.ccyId),o.a.createElement("div",{className:"col-lg-4 col-md-8  p-0 m-0 text-left"},e.ccyName),o.a.createElement("div",{className:"col-lg-1 col-md-2  p-0 m-0 text-center"},e.ccySymbol))))}))}}]),t}(a.Component),jr=Object(s.b)((function(e){return{deactivated:e.client.user.deactivated,populationId:e.client.population.id,populations:e.client.population.populations}}),{selectPopulation:At,deselectPopulation:Ct})(Lr),Fr=function(e){function t(){return Object(le.a)(this,t),Object(pe.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(fe.a)(t,e),Object(se.a)(t,[{key:"componentDidMount",value:function(){this.reload()}},{key:"componentDidUpdate",value:function(){this.reload()}},{key:"reload",value:function(){var e=this.props,t=e.userId,n=e.populationsBusy,r=e.populationsNotAvailable,a=this.props.fetchPopulations;!n&&r&&a(t)}},{key:"render",value:function(){var e=this.props,t=e.busy,n=e.populationsBusy,r=e.populationsNotAvailable,c=e.populationId,u=this.props.createMember;return o.a.createElement("div",{className:"populationTable"},t?o.a.createElement("div",{className:"text-center"},"Loading..."):n?o.a.createElement("div",null,"User populations loading..."):r?"No populations found, we are working on this...":o.a.createElement(a.Fragment,null,o.a.createElement("div",{className:"my-3"},"Please select your country and currency from the list below and confirm:"),o.a.createElement(jr,null),o.a.createElement(he,{action:u,payload:c,disabled:!c,text:"Confirm",buttonType:"btn-primary"})))}}]),t}(a.Component),Br=Object(s.b)((function(e){return{busy:e.session.busy.component.userMenu,populationsBusy:e.session.busy.action.populations,populationsNotAvailable:!e.client.population.populations||!e.client.population.populations.length,userId:e.client.user.id,populationId:e.client.population.id}}),{fetchPopulations:function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve().then((function(){return t({type:_.SET_BUSY,payload:v.BUSY_ACTION_POPULATIONS})})).then((function(){return t(ge(_e,Ot,null))})).then((function(e){return r=e})).then((function(){return r.forEach((function(e){e.isMember&&(t(At(e)),t(wt()),t(jt()),t(Re()))}))})).then((function(){return t({type:_.RECEIVE_POPULATIONS,payload:{populations:r}})})).catch((function(e){return t(T(E.flareType.ERROR,E.flareType.ERR_GENERIC_USERMENU))})).finally((function(){return t({type:_.SET_NOT_BUSY,payload:v.BUSY_ACTION_POPULATIONS})})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},createMember:function(e){return function(){var t=Object(b.a)(h.a.mark((function t(n,r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.resolve().then((function(){return n({type:_.SET_BUSY,payload:v.BUSY_ACTION_POPULATIONS})})).then((function(){return n(ge(Te,Ve+"/"+e,null))})).then((function(){return n(jt())})).then((function(){return n(wt())})).then((function(){return n(Re())})).catch((function(e){return n(T(E.flareType.ERROR,E.flareType.ERR_GENERIC_USERMENU))})).finally((function(){return n({type:_.SET_NOT_BUSY,payload:v.BUSY_ACTION_POPULATIONS})})));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}})(Fr),Dr=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:_.SET_BUSY,payload:v.BUSY_ACTION_POPULATIONS}),e.abrupt("return",ge(Te,It+"/"+n().client.population.id,null)(t,n).then((function(e){Ct()(t,n)})).catch((function(e){return t(T(E.flareType.ERROR,e))})).then((function(){return t({type:_.SET_NOT_BUSY,payload:v.BUSY_ACTION_POPULATIONS})})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Mr=function(e){function t(){return Object(le.a)(this,t),Object(pe.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(fe.a)(t,e),Object(se.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.fetchCountries)()}},{key:"render",value:function(){var e=this.props,t=e.countries,n=e.countryId,r=this.props,a=r.selectCountry,c=r.deselectCountry;return o.a.createElement("div",null,t.map((function(e,t){return o.a.createElement("div",{key:t,className:"country p-0"},o.a.createElement("button",{className:"btn btn-sm p-0 btn-block btn-"+(n===e.countryId?"light":"primary"),value:n===e.countryId?"Selected":"Select #"+e.countryId,onClick:n===e.countryId?function(e){c()}:function(t){a(e.countryId)}},o.a.createElement("div",{className:"container-fluid row p-0 m-0"},o.a.createElement("div",{className:"small col-lg-4 p-0 m-0 text-center"},n===e.countryId?"Selected":"Select #"+e.countryId),o.a.createElement("div",{className:"small col-lg-2 p-0 m-0 text-center"},e.countryId),o.a.createElement("div",{className:"small col-lg-6 p-0 m-0 text-left"},e.countryName))))})))}}]),t}(a.Component),Gr=Object(s.b)((function(e){return{countries:e.global.country.countries,countryId:e.global.country.id}}),{fetchCountries:function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ge(_e,Ye,null)(t,n).then((function(e){t({type:_.RECEIVE_COUNTRIES,payload:{countries:e}})})).catch((function(e){return t(T(E.flareType.ERROR,e))}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},selectCountry:function(e){return function(){var t=Object(b.a)(h.a.mark((function t(n,r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:_.SELECT_COUNTRY,payload:{countryId:e}});case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},deselectCountry:function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:_.DESELECT_COUNTRY,payload:{}});case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}})(Mr),Yr=function(e){function t(){return Object(le.a)(this,t),Object(pe.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(fe.a)(t,e),Object(se.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.fetchCcys)()}},{key:"render",value:function(){var e=this.props,t=e.ccys,n=e.ccyId,r=this.props,a=r.selectCcy,c=r.deselectCcy;return o.a.createElement("div",null,t.map((function(e,t){return o.a.createElement("div",{key:t,className:"ccy p-0"},o.a.createElement("button",{className:"btn btn-sm p-0 btn-block btn-"+(n===e.ccyId?"light":"primary"),value:n===e.ccyId?"Selected":"Select #"+e.ccyId,onClick:n===e.ccyId?function(e){c()}:function(t){a(e.ccyId)}},o.a.createElement("div",{className:"container-fluid row p-0 m-0"},o.a.createElement("div",{className:"small col-lg-3 p-0 m-0 text-center"},n===e.ccyId?"Selected":"Select #"+e.ccyId),o.a.createElement("div",{className:"small col-lg-2 p-0 m-0 text-center"},e.ccyId),o.a.createElement("div",{className:"small col-lg-5 p-0 m-0 text-left"},e.ccyName),o.a.createElement("div",{className:"small col-lg-2 p-0 m-0 text-center"},e.ccySymbol))))})))}}]),t}(a.Component),Hr=Object(s.b)((function(e){return{ccys:e.global.ccy.ccys,ccyId:e.global.ccy.id}}),{fetchCcys:function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ge(_e,He,null)(t,n).then((function(e){t({type:_.RECEIVE_CCYS,payload:{ccys:e}})})).catch((function(e){return t(T(E.flareType.ERROR,e))}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},selectCcy:function(e){return function(){var t=Object(b.a)(h.a.mark((function t(n,r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:_.SELECT_CCY,payload:{ccyId:e}});case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},deselectCcy:function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:_.DESELECT_CCY,payload:{}});case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}})(Yr),Vr=function(e){function t(){return Object(le.a)(this,t),Object(pe.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(fe.a)(t,e),Object(se.a)(t,[{key:"componentDidMount",value:function(){this.verifyExists()}},{key:"componentDidUpdate",value:function(){this.verifyExists()}},{key:"verifyExists",value:function(){var e=this.props,t=e.countryId,n=e.ccyId,r=this.props.populationExists;t&&n&&r(t,n)}},{key:"render",value:function(){var e=this.props,t=e.countryId,n=e.ccyId,r=e.exists,c=this.props.createPopulation;return o.a.createElement(a.Fragment,null,o.a.createElement("button",{className:"btn btn-sm p-0 btn-block btn-"+(""===t||""===n?"light":r?"secondary":"primary"),value:""===t||""===n?"Please select country and currency":r?"The selected population already exists":"Create population: "+t+" "+n,disabled:""===t||""===n||r,onClick:function(e){c(t,n)}},""===t||""===n?"Please select country and currency":r?"The selected population already exists":"Create population: "+t+" "+n),o.a.createElement("br",null),o.a.createElement("div",{className:"container-fluid row p-0 m-0"},o.a.createElement("div",{className:"small col-lg-6 p-0 m-0 text-center"},o.a.createElement(Gr,null)),o.a.createElement("div",{className:"small col-lg-6 p-0 m-0 text-center"},o.a.createElement(Hr,null))))}}]),t}(a.Component),Kr=Object(s.b)((function(e){return{countryId:e.global.country.id,ccyId:e.global.ccy.id,exists:e.client.population.exists}}),{populationExists:function(e,t){return function(){var n=Object(b.a)(h.a.mark((function n(r,a){return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",ge(_e,St+"/"+e+"/"+t,null)(r,a).then((function(e){r({type:_.POPULATION_EXISTS,payload:{exists:e.exists}})})).catch((function(e){return r(T(E.flareType.ERROR,e))})));case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},createPopulation:function(e,t){return function(){var n=Object(b.a)(h.a.mark((function n(r,a){return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:_.SET_BUSY,payload:v.BUSY_ACTION_POPULATIONS}),n.abrupt("return",ge(Te,Tt+"/"+e+"/"+t,null)(r,a).then((function(e){r({type:_.POPULATION_EXISTS,payload:{exists:1}})})).catch((function(e){return r(T(E.flareType.ERROR,e))})).then((function(){return r({type:_.SET_NOT_BUSY,payload:v.BUSY_ACTION_POPULATIONS})})));case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}})(Vr),Wr=function(e){function t(){return Object(le.a)(this,t),Object(pe.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(fe.a)(t,e),Object(se.a)(t,[{key:"render",value:function(){return o.a.createElement(he,{action:Dr,text:"Delete Population",buttonType:"btn-secondary"})}}]),t}(a.Component),qr=Object(s.b)((function(e){return{}}),{deletePopulation:Dr})(Wr),Jr=function(e){function t(){return Object(le.a)(this,t),Object(pe.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(fe.a)(t,e),Object(se.a)(t,[{key:"render",value:function(){var e,t,n,r=this.props,c=r.brake,u=r.mincome,i=r.equality,l=r.warperMincome,s=r.warperEquality,p=r.tunePopulation;return o.a.createElement(a.Fragment,null,o.a.createElement("div",{className:"container"},o.a.createElement(Ht,{text:"mincome",bold:!1,value:u,ccySymbol:""}),o.a.createElement(Ht,{text:"equality",bold:!1,value:i,ccySymbol:""}),o.a.createElement(Ht,{text:"brake",bold:!1,value:c,ccySymbol:""}),o.a.createElement(Ht,{text:"warperMincome",bold:!1,value:l,ccySymbol:""}),o.a.createElement(Ht,{text:"warperEquality",bold:!1,value:s,ccySymbol:""})),o.a.createElement("form",{onSubmit:function(){var r=Object(b.a)(h.a.mark((function r(a){return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a.preventDefault(),p(e.value,t.value,n.value);case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},o.a.createElement("input",{id:"newBrake",ref:function(t){return e=t},type:"text",className:"form-control form-control-sm",placeholder:c.toFixed(2),required:!0}),o.a.createElement("input",{id:"newWarperMincome",ref:function(e){return t=e},type:"text",className:"form-control form-control-sm",placeholder:l.toFixed(2),required:!0}),o.a.createElement("input",{id:"newWarperEquality",ref:function(e){return n=e},type:"text",className:"form-control form-control-sm",placeholder:s.toFixed(2),required:!0}),o.a.createElement("input",{className:"btn btn-sm p-0 btn-block btn-primary",type:"submit",value:"Change configuration"})))}}]),t}(a.Component),Xr=Object(s.b)((function(e){return{mincome:e.client.population.mincome,equality:e.client.population.equality,brake:e.client.population.brake,warperMincome:e.client.population.warperMincome,warperEquality:e.client.population.warperEquality}}),{tunePopulation:function(e,t,n){return function(){var r=Object(b.a)(h.a.mark((function r(a,o){return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a({type:_.SET_BUSY,payload:v.BUSY_ACTION_POPULATIONS}),r.abrupt("return",ge(Te,Rt+"/"+o().client.population.id,{brake:e,warperMincome:t,warperEquality:n})(a,o).then((function(e){})).catch((function(e){return a(T(E.flareType.ERROR,e))})).then((function(){return a({type:_.SET_NOT_BUSY,payload:v.BUSY_ACTION_POPULATIONS})})));case 2:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()}})(Jr),$r=(n(567),function(e){function t(){return Object(le.a)(this,t),Object(pe.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(fe.a)(t,e),Object(se.a)(t,[{key:"render",value:function(){var e=this.props,t=e.busy,n=e.optionUserMenu,r=e.loggedIn,c=e.auth,u=e.identityCertified,i=e.isMember,l=this.props.close;return o.a.createElement("div",{className:"container-fluid row p-0 m-0"},t?"User loading...":o.a.createElement(a.Fragment,null,o.a.createElement("div",{className:"col-lg-3 navbar-light"},r?o.a.createElement(hr,null):"",o.a.createElement(lr,null),r&&"USER"===n?o.a.createElement("div",null,o.a.createElement(Or,null),o.a.createElement(br,null),o.a.createElement(he,{text:"Close my account",action:l,buttonType:"btn-outline-red"})):""),o.a.createElement("div",{className:"col-lg-9 navbar-light"},r?i?u<=0?o.a.createElement(a.Fragment,null,o.a.createElement(_r,null),o.a.createElement(Dt,null)):o.a.createElement("div",{className:"bg-light"},o.a.createElement(or,null),c?o.a.createElement(a.Fragment,null,o.a.createElement("div",{className:"col-lg-4 navbar-light"},o.a.createElement(qr,null)),o.a.createElement("div",{className:"col-lg-4 navbar-light"},o.a.createElement(Xr,null))):o.a.createElement(a.Fragment,null,o.a.createElement("div",{className:"container-fluid row p-0 m-0"},o.a.createElement("div",{className:"col-lg-4 thrubiBlue navbar-light"},o.a.createElement(Rr,null)),o.a.createElement("div",{className:"col-lg-4 thrubiSilver navbar-light"},o.a.createElement(xr,null)),o.a.createElement("div",{className:"col-lg-4 thrubiGold navbar-light"},o.a.createElement(Ur,null))))):o.a.createElement(a.Fragment,null,o.a.createElement(Br,null),c?o.a.createElement(Kr,null):""):o.a.createElement(pr,null))))}}]),t}(a.Component)),zr=Object(s.b)((function(e){return{busy:e.session.busy.component.user,optionUserMenu:e.client.user.optionUserMenu,role:e.client.user.role,loggedIn:e.client.userAccess.loggedIn,populationId:e.client.population.id,isMember:e.client.member.isMember,identityCertified:e.client.user.identityCertified}}),{deletePopulation:Dr,close:function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return t({type:_.SET_BUSY,payload:v.BUSY_COMPONENT_AUTH})})).then((function(){return t(ge(Te,ot,{}))})).then((function(){return t(nn({autoLogin:!1}))})).catch((function(e){return t(T(E.flareType.ERROR,E.errorFlare.ERR_ACCOUNT_CLOSE))})).finally((function(){return t({type:_.SET_NOT_BUSY,payload:v.BUSY_COMPONENT_AUTH})}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}})($r),Qr=Object(s.b)((function(e){return{ethNetwork:e.client.userAccess.ethNetwork,ethAddress:e.client.userAccess.ethAddress}}))((function(e){var t=e.ethNetwork,n=e.ethAddress;return o.a.createElement("div",{className:"d-none container-fluid navbar fixed-top flex-md-nowrap p-0 titleBar bg-light"},o.a.createElement("div",{className:"col-lg-7 d-flex justify-content-center justify-content-md-center justify-content-lg-start fullWidth text-left"},o.a.createElement("img",{className:"mr-2 logoThrubi",src:"/thrubi-client/logo.png",alt:"Thrubi logo",height:"20px",width:"20px"}),o.a.createElement("span",{className:"mr-2 alignBottom navbar-brand thrubiGradient"},o.a.createElement("b",null,"Thrubi App")),o.a.createElement("span",{className:"d-none d-xl-block mr-2 alignBottom text-dark navbar-nav"},"Welcome to Thrubi!"),o.a.createElement(me,null)),o.a.createElement("div",{className:"col-lg-5 d-none d-lg-block float-right mr-0 my-2 text-right"},o.a.createElement("div",{className:"navbar-nav small"},t&&n?o.a.createElement("div",null,o.a.createElement("span",{className:"badge badge-warning"},"network/",t),o.a.createElement("span",{className:"badge badge-info"},n)):"Accessing blockchain data")))})),Zr=(n(568),function(e){function t(){return Object(le.a)(this,t),Object(pe.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(fe.a)(t,e),Object(se.a)(t,[{key:"render",value:function(){var e=this.props,t=e.deactivated,n=e.flares,r=this.props,c=r.deleteFlare,u=r.refreshFlare;return o.a.createElement(a.Fragment,null,t?"":o.a.createElement("div",{className:"fixed-bottom flareBox"},Object.keys(n).map((function(e,t){return o.a.createElement("div",{key:e,role:"alert",onMouseOver:function(){return u(e,!0)},onMouseOut:function(){return u(e)},className:"alert alert-dismissible fade show "+(n[e].type===E.flareType.ERROR?"alert-red":n[e].type===E.flareType.WARNING?"alert-danger":"alert-secondary")},o.a.createElement("b",null,n[e].type),"\xa0",o.a.createElement("span",null,n[e].message?n[e].message.slice(0,200):"Internal error"),"\xa0",o.a.createElement("i",null,n[e].details?n[e].details.slice(0,200):""),o.a.createElement("button",{className:"close paddingX",type:"button",onClick:function(){return c(e)},"data-dismiss":"alert"},o.a.createElement("span",null,"\xd7")))}))))}}]),t}(a.Component)),ea=Object(s.b)((function(e){return{deactivated:e.session.flare.deactivated,flares:e.session.flare.flares}}),{deleteFlare:I,refreshFlare:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(function(){var n=Object(b.a)(h.a.mark((function n(r,a){return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Promise.resolve().then((function(){return clearTimeout(a().session.flare.flares[e].deleteTimeout)})).then((function(){return setTimeout((function(){return r(I(e))}),t?3e4:7e3)})).then((function(t){return r({type:_.REFRESH_FLARE_TIMEOUT,payload:{index:e,deleteTimeout:t}})})));case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}})(Zr),ta=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n().session.workers.globalStats,clearInterval(r),t({type:_.STOP_GLOBAL_STATS_WORKER,payload:{}});case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},na=(n(569),function(e){function t(){return Object(le.a)(this,t),Object(pe.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(fe.a)(t,e),Object(se.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.sendRedirect;window.location.search?e():this.reload()}},{key:"componentWillUnmount",value:function(){ta()}},{key:"reload",value:function(){var e=this.props,t=e.startGlobalStatsWorker,n=e.fetchChannels,r=e.enableBlockchain;return Promise.all([t(),n(),r()])}},{key:"render",value:function(){var e=this.props,t=e.busy,n=e.loggedIn;return o.a.createElement("div",{className:"thrubiApp text-primary"},o.a.createElement(Ee,null),o.a.createElement("div",{className:"mainView"},n?"":o.a.createElement("div",{className:"w-100 py-2 pt-4 pb-1 text-center"},o.a.createElement("h4",{className:"display-4 displayInlineBlock"},"Rising inequality is toxic to growth"),o.a.createElement("i",{className:"displayInlineBlock"},"\xa0(Nick Hanauer)")),t?o.a.createElement("div",{className:"text-center"},"App loading... or Ethereum config not found. Please authorize Thrubi in MetaMask. Not sure what this means? Find out how to enable Thrubi ",o.a.createElement("b",null,"here"),"!"):o.a.createElement(zr,null)),o.a.createElement(Qr,null),o.a.createElement(ea,null))}}]),t}(a.Component)),ra=Object(s.b)((function(e){return{busy:e.session.busy.component.app,loggedIn:e.client.userAccess.loggedIn}}),{startGlobalStatsWorker:function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=setInterval(function(){var e=function(){return Promise.resolve().then((function(){return t(function(){var e=Object(b.a)(h.a.mark((function e(t,n){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.abrupt("return",Promise.all([t(ge(_e,Xe,null)),t(ge(_e,$e,null)),t(ge(_e,ze,null))]).then((function(e){for(var t=0;t<=2;t++)for(var n in e[t])r[n]=e[t][n];return r})).catch((function(e){return t(T(E.flareFallback(e,E.flareBook.errorFlare.ERR_FETCH_GLOBAL_STATS)))})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())})).then((function(e){t({type:_.RECEIVE_GLOBAL_STATS,payload:{globalStats:e}})})).catch((function(e){t(T(E.flareFallback(e,E.errorFlare.ERR_RECEIVE_GLOBAL_STATS)))}))};return e(),e}(),3e4),t({type:_.RECEIVE_GLOBAL_STATS_WORKER,payload:{globalStatsWorker:r}});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},stopGlobalStatsWorker:ta,fetchChannels:on,enableBlockchain:function(){return function(){var e=Object(b.a)(h.a.mark((function e(t,n){var r,a,o,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new Kt.a(Kt.a.givenProvider),a=new r.eth.Contract(qt,"0xb198482C48Ef0e89df3597b0f7250F88c51D6759"),t({type:_.RECEIVE_THRUBI_CONTRACT,payload:{thrubiContract:a}}),o=setInterval((function(){r.eth.net.getNetworkType().then((function(e){return{ethNetwork:e,changed:e!==n().client.userAccess.ethNetwork}})).then((function(e){return e.changed&&t({type:_.UPDATE_ETH_NETWORK,payload:{ethNetwork:e.ethNetwork}}),e}))}),1e3),t({type:_.RECEIVE_ETH_NETWORK_WORKER,payload:{ethNetworkWorker:o}}),c=setInterval((function(){window.ethereum.enable().then((function(){return r.eth.getAccounts()})).catch((function(e){return t(T(E.flareType.ERROR,E.errorFlare.CANNOT_ENABLE_ETHEREUM))})).then((function(e){return e[0]})).then((function(e){return{ethAddress:e,changed:e!==n().client.userAccess.ethAddress}})).then((function(e){return e.changed&&t(nn({autoLogin:!0})),e})).then((function(e){return e.changed&&t({type:_.UPDATE_ETH_ADDRESS,payload:{ethAddress:e.ethAddress}}),e}))}),1e3),t({type:_.RECEIVE_ETH_ADDRESS_WORKER,payload:{ethAddressWorker:c}});case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},sendRedirect:zn})(na),aa=(n(570),ie());u.a.render(o.a.createElement(s.a,{store:aa},o.a.createElement(l.a,{basename:"/thrubi-client"},o.a.createElement(i.a,{exact:!0,path:"/",component:ra}))),document.getElementById("root"))}},[[229,1,2]]]);
//# sourceMappingURL=main.fa98a040.chunk.js.map